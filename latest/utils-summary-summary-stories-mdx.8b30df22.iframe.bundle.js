(globalThis.webpackChunk_looker_storybook=globalThis.webpackChunk_looker_storybook||[]).push([[2750],{"../../node_modules/lodash/_createOver.js":(module,__unused_webpack_exports,__webpack_require__)=>{var apply=__webpack_require__("../../node_modules/lodash/_apply.js"),arrayMap=__webpack_require__("../../node_modules/lodash/_arrayMap.js"),baseIteratee=__webpack_require__("../../node_modules/lodash/_baseIteratee.js"),baseRest=__webpack_require__("../../node_modules/lodash/_baseRest.js"),baseUnary=__webpack_require__("../../node_modules/lodash/_baseUnary.js"),flatRest=__webpack_require__("../../node_modules/lodash/_flatRest.js");module.exports=function createOver(arrayFunc){return flatRest((function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(baseIteratee)),baseRest((function(args){var thisArg=this;return arrayFunc(iteratees,(function(iteratee){return apply(iteratee,thisArg,args)}))}))}))}},"../../node_modules/lodash/fp/allPass.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("../../node_modules/lodash/fp/overEvery.js")},"../../node_modules/lodash/fp/any.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("../../node_modules/lodash/fp/some.js")},"../../node_modules/lodash/fp/overEvery.js":(module,__unused_webpack_exports,__webpack_require__)=>{var func=__webpack_require__("../../node_modules/lodash/fp/convert.js")("overEvery",__webpack_require__("../../node_modules/lodash/overEvery.js"));func.placeholder=__webpack_require__("../../node_modules/lodash/fp/placeholder.js"),module.exports=func},"../../node_modules/lodash/fp/some.js":(module,__unused_webpack_exports,__webpack_require__)=>{var func=__webpack_require__("../../node_modules/lodash/fp/convert.js")("some",__webpack_require__("../../node_modules/lodash/some.js"));func.placeholder=__webpack_require__("../../node_modules/lodash/fp/placeholder.js"),module.exports=func},"../../node_modules/lodash/overEvery.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayEvery=__webpack_require__("../../node_modules/lodash/_arrayEvery.js"),overEvery=__webpack_require__("../../node_modules/lodash/_createOver.js")(arrayEvery);module.exports=overEvery},"../filter-expressions/src/types/filter_ast_node.ts":()=>{},"../filter-expressions/src/types/filter_item_to_string_function.ts":()=>{},"../filter-expressions/src/types/filter_item_to_string_map_type.ts":()=>{},"../filter-expressions/src/types/filter_model.ts":()=>{},"../filter-expressions/src/types/filter_to_string_function_type.ts":()=>{},"../filter-expressions/src/types/filter_type_map.ts":()=>{},"../filter-expressions/src/types/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:()=>_user_attribute__WEBPACK_IMPORTED_MODULE_8__.TYPE_USER_ATTRIBUTE});var _filter_ast_node__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../filter-expressions/src/types/filter_ast_node.ts");__webpack_require__.o(_filter_ast_node__WEBPACK_IMPORTED_MODULE_0__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _filter_ast_node__WEBPACK_IMPORTED_MODULE_0__.TYPE_USER_ATTRIBUTE}});var _filter_item_to_string_function__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../filter-expressions/src/types/filter_item_to_string_function.ts");__webpack_require__.o(_filter_item_to_string_function__WEBPACK_IMPORTED_MODULE_1__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _filter_item_to_string_function__WEBPACK_IMPORTED_MODULE_1__.TYPE_USER_ATTRIBUTE}});var _filter_item_to_string_map_type__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../filter-expressions/src/types/filter_item_to_string_map_type.ts");__webpack_require__.o(_filter_item_to_string_map_type__WEBPACK_IMPORTED_MODULE_2__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _filter_item_to_string_map_type__WEBPACK_IMPORTED_MODULE_2__.TYPE_USER_ATTRIBUTE}});var _filter_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../filter-expressions/src/types/filter_model.ts");__webpack_require__.o(_filter_model__WEBPACK_IMPORTED_MODULE_3__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _filter_model__WEBPACK_IMPORTED_MODULE_3__.TYPE_USER_ATTRIBUTE}});var _filter_to_string_function_type__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../filter-expressions/src/types/filter_to_string_function_type.ts");__webpack_require__.o(_filter_to_string_function_type__WEBPACK_IMPORTED_MODULE_4__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _filter_to_string_function_type__WEBPACK_IMPORTED_MODULE_4__.TYPE_USER_ATTRIBUTE}});var _filter_type_map__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../filter-expressions/src/types/filter_type_map.ts");__webpack_require__.o(_filter_type_map__WEBPACK_IMPORTED_MODULE_5__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _filter_type_map__WEBPACK_IMPORTED_MODULE_5__.TYPE_USER_ATTRIBUTE}});var _location__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../filter-expressions/src/types/location/index.ts");__webpack_require__.o(_location__WEBPACK_IMPORTED_MODULE_6__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _location__WEBPACK_IMPORTED_MODULE_6__.TYPE_USER_ATTRIBUTE}});var _transform_function__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../filter-expressions/src/types/transform_function.ts");__webpack_require__.o(_transform_function__WEBPACK_IMPORTED_MODULE_7__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _transform_function__WEBPACK_IMPORTED_MODULE_7__.TYPE_USER_ATTRIBUTE}});var _user_attribute__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../filter-expressions/src/types/user_attribute/index.ts")},"../filter-expressions/src/types/location/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var _location_item_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../filter-expressions/src/types/location/location_item_types.ts");__webpack_require__.o(_location_item_types__WEBPACK_IMPORTED_MODULE_0__,"TYPE_USER_ATTRIBUTE")&&__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:function(){return _location_item_types__WEBPACK_IMPORTED_MODULE_0__.TYPE_USER_ATTRIBUTE}})},"../filter-expressions/src/types/location/location_item_types.ts":()=>{},"../filter-expressions/src/types/transform_function.ts":()=>{},"../filter-expressions/src/types/user_attribute/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{TYPE_USER_ATTRIBUTE:()=>TYPE_USER_ATTRIBUTE});__webpack_require__("../filter-expressions/src/types/user_attribute/user_attribute_with_value.ts");const TYPE_USER_ATTRIBUTE="user_attribute"},"../filter-expressions/src/types/user_attribute/user_attribute_with_value.ts":()=>{},"../filter-expressions/src/utils/get_matches_advanced_node.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>getMatchesAdvancedNode});const getMatchesAdvancedNode=(expression,ast)=>ast?{id:ast.id,is:!0,type:"matchesAdvanced",expression:void 0===ast.expression?expression:ast.expression}:{id:1,type:"matchesAdvanced",expression}},"../filter-expressions/src/utils/has_matches_advanced_node.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>hasMatchesAdvancedNode});var lodash_fp_any__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/lodash/fp/any.js"),lodash_fp_any__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_fp_any__WEBPACK_IMPORTED_MODULE_0__),lodash_fp_flow__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/lodash/fp/flow.js"),lodash_fp_flow__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_fp_flow__WEBPACK_IMPORTED_MODULE_1__),_tree__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../filter-expressions/src/utils/tree/tree_to_list.ts");const isMatchesAdvancedItem=subTypes=>({type})=>"matchesAdvanced"===type||-1===subTypes.indexOf(type),hasMatchesAdvancedNode=subTypes=>lodash_fp_flow__WEBPACK_IMPORTED_MODULE_1___default()([_tree__WEBPACK_IMPORTED_MODULE_2__.i,lodash_fp_any__WEBPACK_IMPORTED_MODULE_0___default()(isMatchesAdvancedItem(subTypes))])},"../filter-expressions/src/utils/number/get_number_from_string.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>getNumberFromString});const getNumberFromString=text=>(text=>text.length>15&&-1===text.indexOf("."))(text)?BigInt(text):Number(text)},"../filter-expressions/src/utils/parse_filter_expression.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>parseFilterExpression});var peg=__webpack_require__("../../node_modules/pegjs/lib/peg.js"),get_number_from_string=__webpack_require__("../filter-expressions/src/utils/number/get_number_from_string.ts"),get_matches_advanced_node=__webpack_require__("../filter-expressions/src/utils/get_matches_advanced_node.ts"),cloneDeep=__webpack_require__("../../node_modules/lodash/cloneDeep.js"),cloneDeep_default=__webpack_require__.n(cloneDeep),flow=__webpack_require__("../../node_modules/lodash/fp/flow.js"),flow_default=__webpack_require__.n(flow),apply_id_to_ast=__webpack_require__("../filter-expressions/src/utils/transform/utils/apply_id_to_ast.ts");var types=__webpack_require__("../filter-expressions/src/types/index.ts"),find_user_attribute=__webpack_require__("../filter-expressions/src/utils/user_attribute/find_user_attribute.ts");const updateAttributeValue=(node,userAttributes)=>{if(node&&node.type===types.TYPE_USER_ATTRIBUTE){const userAttribute=(0,find_user_attribute.t)(node.attributeName,userAttributes);return{...node,attributeValue:userAttribute&&userAttribute.value}}return node},userAttributeTransform=userAttributes=>root=>{if(!userAttributes||!userAttributes.length)return root;const workingRoot=updateAttributeValue(root,userAttributes);let pointer=workingRoot;for(;pointer.right;)pointer.left=pointer.left&&updateAttributeValue(pointer.left,userAttributes),pointer.right=updateAttributeValue(pointer.right,userAttributes),pointer=pointer.right;return workingRoot};var type_to_grammar=__webpack_require__("../filter-expressions/src/utils/type_to_grammar.ts");const generateParser=(()=>{const parserCache={};return(type,grammar)=>(parserCache[type]||(parserCache[type]=(0,peg.generate)(grammar)),parserCache[type])})(),parserOptions={Object,getNumberFromString:get_number_from_string.J},parseFilterExpression=(type,expression,userAttributes)=>{const{grammar,anyvalue,transform=root=>root}=(0,type_to_grammar.U)(type);if(""===expression)return anyvalue;try{const parser=generateParser(type,grammar),transforms=[userAttributeTransform(userAttributes),transform];return((root,transforms)=>flow_default()([...transforms,cloneDeep_default(),apply_id_to_ast.Z])(root))(parser.parse(expression,parserOptions),transforms)}catch(error){return(0,get_matches_advanced_node.h)(expression)}}},"../filter-expressions/src/utils/summary/summary.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>summary});var has_matches_advanced_node=__webpack_require__("../filter-expressions/src/utils/has_matches_advanced_node.ts"),any=__webpack_require__("../../node_modules/lodash/fp/any.js"),any_default=__webpack_require__.n(any),allPass=__webpack_require__("../../node_modules/lodash/fp/allPass.js"),allPass_default=__webpack_require__.n(allPass),flow=__webpack_require__("../../node_modules/lodash/fp/flow.js"),flow_default=__webpack_require__.n(flow),types=__webpack_require__("../filter-expressions/src/types/index.ts"),tree_to_list=__webpack_require__("../filter-expressions/src/utils/tree/tree_to_list.ts");const hasUserAttributeNodeWithoutValue=flow_default()([tree_to_list.i,any_default()(allPass_default()([({type})=>type===types.TYPE_USER_ATTRIBUTE,({attributeValue})=>!attributeValue]))]);var parse_filter_expression=__webpack_require__("../filter-expressions/src/utils/parse_filter_expression.ts"),inorder_traversal=__webpack_require__("../filter-expressions/src/utils/tree/inorder_traversal.ts"),type_to_grammar=__webpack_require__("../filter-expressions/src/utils/type_to_grammar.ts"),i18next=__webpack_require__("../../node_modules/i18next/dist/esm/i18next.js");const t=i18next.Z.t.bind(i18next.Z),summary=props=>{const{type,expression="",userAttributes,field,required}=props;if(required&&!expression)return t("Value required",{ns:"summary"});const{describe,subTypes}=(0,type_to_grammar.U)(type),ast=(0,parse_filter_expression.P)(type,expression,userAttributes);if(hasUserAttributeNodeWithoutValue(ast)){const userAttribute=getUserAttributeMatchingAST(ast,userAttributes);if(userAttribute)return`${userAttribute?.label} (null)`}return(0,has_matches_advanced_node.Q)(subTypes)(ast)?expression:((root,describe,filterType,field)=>{const orItems=[],andItems=[];(0,inorder_traversal.G)(root,(node=>{const item=node;","!==item.type&&(item.is?orItems:andItems).push(describe(item,filterType,field))}));const resultOr=orItems?orItems.join(" or "):"",resultAnd=andItems?andItems.join(" and "):"";let result=resultOr;return result+=resultOr&&resultAnd?", and ":"",result+=resultAnd,result})(ast,describe,type,field)},getUserAttributeMatchingAST=({attributeName},userAttributes)=>userAttributes?.find((ua=>ua.name===attributeName))},"../filter-expressions/src/utils/user_attribute/find_user_attribute.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>findUserAttribute});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.find.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.find.js");const findUserAttribute=(attribute,userAttributes)=>userAttributes&&userAttributes.find((({name})=>name===attribute))},"../filter-expressions/src/utils/summary/summary.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("../../node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@mdx-js/react/dist/esm.js"),_summary__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("../../node_modules/@storybook/addon-docs/dist/esm/index.js"),__webpack_require__("../filter-expressions/src/utils/summary/summary.ts"));function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const makeShortcode=name=>function MDXDefaultShortcode(props){return console.warn("Component "+name+" was not imported, exported, or provided by MDXProvider as global scope"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("div",props)},Meta=makeShortcode("Meta"),ImportMessage=makeShortcode("ImportMessage"),layoutProps={};function MDXContent({components,...props}){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(Meta,{component:_summary__WEBPACK_IMPORTED_MODULE_3__.S,title:"Docs/Components/Filters/Summary",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h1",{id:"summary"},"summary"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(ImportMessage,{packageName:"filter-components",mdxType:"ImportMessage"},"summary"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"summary")," function returns a localized, human-readable summary of a\nfilter expression, given the expression's type, the expression itself,\nand the user attributes and field, if applicable."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-jsx"},";() => {\n  const type = 'number'\n  const [expression, setExpression] = useState('[0,20],>30')\n  const handleChange = (value) => {\n    setExpression(value.expression)\n  }\n  return (\n    <Popover\n      content={\n        <PopoverContent>\n          <Filter\n            expressionType={type}\n            expression={expression}\n            onChange={handleChange}\n          />\n        </PopoverContent>\n      }\n    >\n      <Button>{summary({ type, expression })}</Button>\n    </Popover>\n  )\n}\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Docs/Components/Filters/Summary",component:_summary__WEBPACK_IMPORTED_MODULE_3__.S,includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(MDXContent,null)};const __WEBPACK_DEFAULT_EXPORT__=componentMeta,__namedExportsOrder=["__page"]}}]);