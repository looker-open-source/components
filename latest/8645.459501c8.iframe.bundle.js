"use strict";(globalThis.webpackChunk_looker_storybook=globalThis.webpackChunk_looker_storybook||[]).push([[8645],{"../visualizations-adapters/src/ErrorBoundary/ErrorBoundary.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>ErrorBoundary});var esm_extends=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("../../node_modules/react/index.js"),Heading=__webpack_require__("../components/src/Text/Heading/Heading.tsx"),Translation=__webpack_require__("../../node_modules/react-i18next/dist/es/Translation.js"),Accordion2=__webpack_require__("../components/src/Accordion2/Accordion2.tsx"),styled_components_browser_esm=(__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js")),Table=__webpack_require__("../components/src/Table/Table.tsx"),TableHead=__webpack_require__("../components/src/Table/TableHead/index.tsx"),TableRow=__webpack_require__("../components/src/Table/TableRow/index.tsx"),TableHeaderCell=__webpack_require__("../components/src/Table/TableHeaderCell/index.tsx"),TableBody=__webpack_require__("../components/src/Table/TableBody/index.tsx"),TableDataCell=__webpack_require__("../components/src/Table/TableDataCell/index.tsx");const StaticTable=({data=[],fields={dimensions:[],measures:[]},width="auto"})=>{if(!data.length)return null;const measureLabels=[...fields.measures].map((f=>[f.name,f.view_label])),dimensionLabels=[...fields.dimensions].map((f=>[f.name,f.label_short])),fieldLabels=Object.fromEntries([...dimensionLabels,...measureLabels]),formattedData=data.map((d=>Object.fromEntries(Object.entries(d).map((([key,value])=>[key,value]))))),resultKeys=Array.isArray(data)?Object.keys(data[0]):Object.keys(data);return react.createElement(Table.i,{width:"auto"===width?"100%":`${width}px`,"data-testid":"table-chart"},react.createElement(TableHead.s,null,react.createElement(TableRow.S,null,react.createElement(TableHeaderCell.x,null),resultKeys.map((key=>react.createElement(StyledTableHeaderCell,{key,width:"auto"},fieldLabels[key]))))),react.createElement(TableBody.R,null,Array.isArray(data)&&formattedData.map(((obj,i)=>react.createElement(TableRow.S,{key:i},react.createElement(TableDataCell.e,{textAlign:"right",color:"text1",width:"1px",pr:"small"},i+1),resultKeys.map((key=>{const val=obj[key];let valHelper=val;return"function"==typeof val?valHelper=val():Object(val)===val&&(valHelper=JSON.stringify(val)),react.createElement(TableDataCell.e,{key},valHelper)})))))))},StyledTableHeaderCell=(0,styled_components_browser_esm.ZP)(TableHeaderCell.x).withConfig({displayName:"StaticTable__StyledTableHeaderCell",componentId:"sc-15kcil2-0"})(["&:first-child{max-width:0;min-width:0;}"]);try{StaticTable.displayName="StaticTable",StaticTable.__docgenInfo={description:"",displayName:"StaticTable",props:{data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"SDKRecord[]"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"CTable"}},fields:{defaultValue:{value:"{ dimensions: [], measures: [] }"},description:"",name:"fields",required:!1,type:{name:"Fields"}},legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:{value:"auto"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-adapters/src/StaticTable/StaticTable.tsx#StaticTable"]={docgenInfo:StaticTable.__docgenInfo,name:"StaticTable",path:"../visualizations-adapters/src/StaticTable/StaticTable.tsx#StaticTable"})}catch(__react_docgen_typescript_loader_error){}var isEmpty=__webpack_require__("../../node_modules/lodash/isEmpty.js"),isEmpty_default=__webpack_require__.n(isEmpty),useTranslation=__webpack_require__("../visualizations-adapters/src/utils/useTranslation.ts"),Truncate=__webpack_require__("../components/src/Truncate/Truncate.tsx");const renderKeyValueList=(o,i18n)=>{const{t}=i18n,collection=Object.entries(o);return react.createElement(DL,null,collection.map((pair=>{const[key,value]=pair;return react.createElement(ListRow,{key},react.createElement(DT,null,react.createElement(Truncate.k,null,key)),react.createElement(DD,null,(v=>{switch(typeof v){case"object":return null===v?t("null"):renderKeyValueList(v,i18n);case"boolean":return t(v?"true":"false");case"undefined":return t("undefined");default:return v}})(value)))})))},ListRow=styled_components_browser_esm.ZP.div.withConfig({displayName:"KeyValueList__ListRow",componentId:"sc-o6y831-0"})(["border-top:1px solid ",";padding:"," 0;"],(({theme})=>theme.colors.ui2),(({theme})=>theme.space.xsmall)),DD=styled_components_browser_esm.ZP.dd.withConfig({displayName:"KeyValueList__DD",componentId:"sc-o6y831-1"})(["font-size:",";line-height:",";margin:0;margin-left:",";"],(({theme})=>theme.fontSizes.small),(({theme})=>theme.lineHeights.large),(({theme})=>theme.space.xlarge)),DL=styled_components_browser_esm.ZP.dl.withConfig({displayName:"KeyValueList__DL",componentId:"sc-o6y831-2"})(["margin:0;"," &{margin-top:",";}"],DD,(({theme})=>theme.space.xsmall)),DT=styled_components_browser_esm.ZP.dt.withConfig({displayName:"KeyValueList__DT",componentId:"sc-o6y831-3"})(["border-bottom:1px;color:",";font-size:",";font-weight:",";line-height:",";margin:0;"],(({theme})=>theme.colors.ui4),(({theme})=>theme.fontSizes.small),(({theme})=>theme.fontWeights.semiBold),(({theme})=>theme.lineHeights.small)),KeyValueList=({value})=>{const i18n=(0,useTranslation.$)("KeyValueList");return renderKeyValueList(value,i18n)};try{KeyValueList.displayName="KeyValueList",KeyValueList.__docgenInfo={description:"",displayName:"KeyValueList",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SDKRecord"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-adapters/src/KeyValueList/KeyValueList.tsx#KeyValueList"]={docgenInfo:KeyValueList.__docgenInfo,name:"KeyValueList",path:"../visualizations-adapters/src/KeyValueList/KeyValueList.tsx#KeyValueList"})}catch(__react_docgen_typescript_loader_error){}const Debug=({ok,data,error,config={},fields})=>{const{t}=(0,useTranslation.$)("Debug");return react.createElement(react.Fragment,null,react.createElement(KeyValueList,{value:{response:t(ok?"ok":"error")}}),!isEmpty_default()(error)&&react.createElement(Accordion2.V,{indicatorPosition:"left",defaultOpen:!0,label:t("Error")},react.createElement(KeyValueList,{value:error||{}})),!isEmpty_default()(config)&&react.createElement(Accordion2.V,{indicatorPosition:"left",label:t("Config")},react.createElement(KeyValueList,{value:config})),!isEmpty_default()(fields)&&react.createElement(react.Fragment,null,react.createElement(Accordion2.V,{indicatorPosition:"left",label:t("Dimensions")},react.createElement(KeyValueList,{value:fields?.dimensions||{}})),react.createElement(Accordion2.V,{indicatorPosition:"left",label:t("Measures")},react.createElement(KeyValueList,{value:fields?.measures||{}}))),data&&react.createElement(Accordion2.V,{indicatorPosition:"left",defaultOpen:!0,label:t("Result")},react.createElement(StaticTable,{data,fields})))};try{Debug.displayName="Debug",Debug.__docgenInfo={description:"",displayName:"Debug",props:{ok:{defaultValue:null,description:"",name:"ok",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"SDKRecord[]"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"IError"}},config:{defaultValue:{value:"{}"},description:"",name:"config",required:!1,type:{name:"Partial<CAll>"}},fields:{defaultValue:null,description:"",name:"fields",required:!1,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-adapters/src/Debug/Debug.tsx#Debug"]={docgenInfo:Debug.__docgenInfo,name:"Debug",path:"../visualizations-adapters/src/Debug/Debug.tsx#Debug"})}catch(__react_docgen_typescript_loader_error){}const ERROR_MAP_Invalid_time_value="You have invalid values in your date or time dimension. One common fix is to filter out all null values and invalid date or time strings from your dimension.",formatErrorMessage=errorMessage=>"Invalid time value"===errorMessage.message?ERROR_MAP_Invalid_time_value:errorMessage.toString();class ErrorBoundary extends react.Component{constructor(props){super(props),this.state={errorMessage:new Error(""),hasError:!1}}static getDerivedStateFromError(error){return{errorMessage:error,hasError:!0}}componentDidCatch(errorMessage,stackTrace){this.setState((state=>({...state,errorMessage,stackTrace})))}render(){if(this.state.hasError){const{errorMessage,stackTrace}=this.state;return react.createElement(react.Fragment,null,react.createElement(Heading.X,null,react.createElement(Translation.W,{ns:"ErrorBoundary"},(t=>t("Something went wrong")))),react.createElement(Debug,(0,esm_extends.Z)({ok:!1,error:{message:formatErrorMessage(errorMessage),...stackTrace}},this.props)))}return this.props.children}}ErrorBoundary.displayName="ErrorBoundary";try{ErrorBoundary.displayName="ErrorBoundary",ErrorBoundary.__docgenInfo={description:"",displayName:"ErrorBoundary",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"SDKRecord[]"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"CAll"}},fields:{defaultValue:null,description:"",name:"fields",required:!1,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-adapters/src/ErrorBoundary/ErrorBoundary.tsx#ErrorBoundary"]={docgenInfo:ErrorBoundary.__docgenInfo,name:"ErrorBoundary",path:"../visualizations-adapters/src/ErrorBoundary/ErrorBoundary.tsx#ErrorBoundary"})}catch(__react_docgen_typescript_loader_error){}},"../visualizations-adapters/src/VisWrapper/VisWrapper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>VisWrapper});var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_looker_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../components-providers/src/ComponentsProvider.tsx");const VisWrapperInternal=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({legend,...props},ref)=>(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.Fg)()?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},props,{ref})):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_looker_components__WEBPACK_IMPORTED_MODULE_2__.t,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(VisWrapperInternal,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},props,{ref})))));VisWrapperInternal.displayName="VisWrapperInternal";const flexDirection=({legend})=>{const POSITION=legend?legend.position:"bottom";return(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.iv)(["flex-direction:",";justify-content:",";"],{top:"column-reverse",right:"row",left:"row-reverse",bottom:"column"}[POSITION],"left"===POSITION?"flex-end":"flex-start")},VisWrapper=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)(VisWrapperInternal).withConfig({displayName:"VisWrapper",componentId:"sc-sssqk1-0"})(["display:flex;flex:1;"," & > div > svg{overflow:visible;}"],flexDirection);try{VisWrapper.displayName="VisWrapper",VisWrapper.__docgenInfo={description:"",displayName:"VisWrapper",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-adapters/src/VisWrapper/VisWrapper.tsx#VisWrapper"]={docgenInfo:VisWrapper.__docgenInfo,name:"VisWrapper",path:"../visualizations-adapters/src/VisWrapper/VisWrapper.tsx#VisWrapper"})}catch(__react_docgen_typescript_loader_error){}},"../visualizations-adapters/src/locales/resources/en.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{en:()=>en});const en={locale:"en",resources:{en:{Debug:{Config:"Config",Dimensions:"Dimensions",Error:"Error",Measures:"Measures",Result:"Result",error:"error",ok:"ok"},ErrorBoundary:{"Something went wrong":"Something went wrong"},translation:{"Row Total":"Row Total",false:"false",null:"null",true:"true",undefined:"undefined"},useNormalizedPivotLabels:{"Row Total":"Row Total"}}}}},"../visualizations-adapters/src/utils/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H7:()=>DEFAULT_STRING_FORMAT,Li:()=>DEFAULT_SERIES_COLORS,R$:()=>DEFAULT_HEIGHT,jK:()=>DEFAULT_MARGIN,jS:()=>DEFAULT_EMPTY_FIELDS,tG:()=>DEFAULT_STRING_FORMAT_PERCENT});const DEFAULT_HEIGHT=500,DEFAULT_SERIES_COLORS=["#6c43e0","#b73ec3","#db4da8","#ed6995","#f1898f"],DEFAULT_STRING_FORMAT="0,0.[00]",DEFAULT_STRING_FORMAT_PERCENT="0.[00]%",DEFAULT_MARGIN=50,DEFAULT_EMPTY_FIELDS={dimensions:[],measures:[],pivots:[]}},"../visualizations-adapters/src/utils/getDataRange.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>getDataRange});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.filter.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.reduce.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.reduce.js");var lodash_isArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/lodash/isArray.js"),lodash_isArray__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_isArray__WEBPACK_IMPORTED_MODULE_7__),lodash_add__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/lodash/add.js"),lodash_add__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash_add__WEBPACK_IMPORTED_MODULE_8__),lodash_get__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/lodash/get.js"),lodash_get__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_9__);const getDataRange=({config,data,fields})=>{const positioning=lodash_get__WEBPACK_IMPORTED_MODULE_9___default()(config,["positioning"],"overlay"),eligibleMeasures=fields.measures.filter(((measure,index)=>!!measure.is_numeric&&(!config.series||(lodash_isArray__WEBPACK_IMPORTED_MODULE_7___default()(config.series)?config?.series?.[index]?.visible:config?.series?.[measure.name]?.visible)))).map((measure=>measure.name));return data.reduce(((draftRange,datum)=>{const[currentMin,currentMax]=draftRange,datumValues=eligibleMeasures.map((name=>datum[name])),accumulatedValue=datumValues.reduce(lodash_add__WEBPACK_IMPORTED_MODULE_8___default(),0),newMax=Math.max(..."stacked"===positioning?[accumulatedValue]:datumValues,currentMax);return[Math.min(..."stacked"===positioning?[accumulatedValue]:datumValues,currentMin),newMax]}),[1/0,-1/0])}},"../visualizations-adapters/src/utils/getDimensionNames.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>getDimensionNames});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js");var ___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../visualizations-adapters/src/utils/constants.ts");const getDimensionNames=(fields=___WEBPACK_IMPORTED_MODULE_2__.jS)=>{const{dimensions=[]}=fields;return dimensions.map((field=>field.name))}},"../visualizations-adapters/src/utils/getMeasureNames.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>getMeasureNames});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js");var ___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../visualizations-adapters/src/utils/constants.ts");const getMeasureNames=(fields=___WEBPACK_IMPORTED_MODULE_2__.jS)=>{const{measures=[]}=fields;return measures.map((field=>field.name))}},"../visualizations-adapters/src/utils/getSeriesMax.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>getSeriesMax});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js");var _isNumeric__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../visualizations-adapters/src/utils/isNumeric.ts");const getSeriesMax=(seriesName,data)=>{const values=data.map((d=>{const val=d[seriesName];return(0,_isNumeric__WEBPACK_IMPORTED_MODULE_2__.k)(val)?Number(val):-1/0})),maxVal=Math.max(...values);return maxVal===-1/0?0:maxVal}},"../visualizations-adapters/src/utils/getSeriesMin.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>getSeriesMin});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js");var _isNumeric__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../visualizations-adapters/src/utils/isNumeric.ts");const getSeriesMin=(seriesName,data)=>{const values=data.map((d=>{const val=d[seriesName];return(0,_isNumeric__WEBPACK_IMPORTED_MODULE_2__.k)(val)?Number(val):1/0})),minVal=Math.min(...values);return minVal===1/0?0:minVal}},"../visualizations-adapters/src/utils/isNumeric.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>isNumeric});const isNumeric=str=>"number"==typeof str||"string"==typeof str&&""!==str&&!isNaN(Number(str.replace(/\.|,/g,"")))},"../visualizations-adapters/src/utils/useTranslation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>useTranslation});var _looker_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../i18n/src/useTranslationBase.ts"),_locales__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../visualizations-adapters/src/locales/resources/en.ts");const useTranslation=(ns,options)=>(0,_looker_i18n__WEBPACK_IMPORTED_MODULE_0__.l)(_locales__WEBPACK_IMPORTED_MODULE_1__.en,ns,options)},"../visualizations-table/src/Table/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>Table});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.find.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.find.js");var react=__webpack_require__("../../node_modules/react/index.js"),constants=__webpack_require__("../visualizations-adapters/src/utils/constants.ts"),getSeriesMin=__webpack_require__("../visualizations-adapters/src/utils/getSeriesMin.ts"),getSeriesMax=__webpack_require__("../visualizations-adapters/src/utils/getSeriesMax.ts"),index_production=__webpack_require__("../../node_modules/@tanstack/react-table/build/umd/index.production.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),IconButton=__webpack_require__("../components/src/Button/IconButton.tsx"),Grid=__webpack_require__("../components/src/Layout/Grid/Grid.tsx"),Truncate=__webpack_require__("../components/src/Truncate/Truncate.tsx"),Box=__webpack_require__("../components/src/Layout/Box/Box.tsx"),umd_index_production=__webpack_require__("../../node_modules/@tanstack/react-virtual/build/umd/index.production.js");const useVirtual=({data,scrollContainer,defaultRowHeight=30})=>{const rowVirtualizer=(0,umd_index_production.useVirtualizer)({count:data.length,getScrollElement:()=>scrollContainer.current,overscan:10,estimateSize:()=>defaultRowHeight}),{getTotalSize,getVirtualItems}=rowVirtualizer,virtualRows=getVirtualItems(),paddingTop=virtualRows.length>0&&virtualRows[0]?.start||0,paddingBottom=virtualRows.length>0?getTotalSize()-(virtualRows[virtualRows.length-1]?.end||0):0;return{virtualRows,OffsetTop:()=>paddingTop>0?react.createElement("tr",null,react.createElement("td",{style:{height:`${paddingTop}px`}})):null,OffsetBottom:()=>paddingBottom>0?react.createElement("tr",null,react.createElement("td",{style:{height:`${paddingBottom}px`}})):null}};try{useVirtual.displayName="useVirtual",useVirtual.__docgenInfo={description:"useVirtual handles the logic related to configuring our virtual scrolling\nbehavior used to improve the UX for large data sets.",displayName:"useVirtual",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},scrollContainer:{defaultValue:null,description:"",name:"scrollContainer",required:!0,type:{name:"RefObject<HTMLDivElement>"}},defaultRowHeight:{defaultValue:{value:"30"},description:"",name:"defaultRowHeight",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-table/src/hooks/useVirtual.tsx#useVirtual"]={docgenInfo:useVirtual.__docgenInfo,name:"useVirtual",path:"../visualizations-table/src/hooks/useVirtual.tsx#useVirtual"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.filter.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.reduce.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.reduce.js");var noop=__webpack_require__("../../node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop);const buildDimensionColumns=dimensions=>dimensions.map((dimension=>({header:dimension.label,accessorFn:data=>data[dimension.name],id:dimension.name}))),nestPivotedFields=({pivotList=[],pivotIndex,nestedPivots,pivotValues})=>{const columnHelper=(0,index_production.createColumnHelper)(),pivot=pivotList[pivotIndex];if(pivot){const{id,header}=pivotValues?{id:`${pivot.name} - ${pivotValues?.data[pivot.name]}`,header:pivotValues?.labels[pivot.name]?.replace(/(<([^>]+)>)/gi,"")}:{id:pivot.name,header:pivot.label};return nestPivotedFields({pivotList,pivotIndex:pivotIndex+1,nestedPivots:columnHelper.group({id,header,columns:[...Array.isArray(nestedPivots)?nestedPivots:[nestedPivots]]}),pivotValues})}return Array.isArray(nestedPivots)?columnHelper.group({id:`pivot-field-${pivotIndex}`,columns:nestedPivots}):nestedPivots},buildMeasureColumns=(measures,config)=>measures.reduce(((cols,measure,i)=>{const pivotKey=measure.pivot_key||"",group=cols[pivotKey]||[],seriesConfig={...measure,...Array.isArray(config.series)?config.series[i]:config.series?.[measure.name]};return{...cols,[pivotKey]:[...group,{header:seriesConfig.label,accessorFn:data=>data[measure.name],id:measure.name}]}}),{}),useHeadlessTable=props=>{const{data,config,fields}=props,{column_order,show_row_totals=!0,series={}}=config,flatFields=[...fields.dimensions,...fields.measures],columns=(props=>!!props.fields.pivots?.length&&!!props.pivots?.length)(props)?(props=>{const{fields,pivots,config}=props,reversedPivots=[...fields.pivots||[]].reverse(),dimensionColumns=buildDimensionColumns(fields.dimensions),nestedDimensions=nestPivotedFields({pivotList:reversedPivots,pivotIndex:0,nestedPivots:dimensionColumns}),measureColumns=buildMeasureColumns(fields.measures,config);return[nestedDimensions,...Object.entries(measureColumns).reduce(((groups,[pivotKey,measures])=>{const pivot=pivots.find((p=>p.key===pivotKey));return[...groups,nestPivotedFields({pivotList:reversedPivots,pivotIndex:0,nestedPivots:measures,pivotValues:pivot})]}),[])]})(props):(({fields,config})=>[...buildDimensionColumns(fields.dimensions),...Object.values(buildMeasureColumns(fields.measures,config)).flat()])(props),[sorting,setSorting]=(0,react.useState)(flatFields.sort(((field1,field2)=>(field1.sorted?.sort_index||-1)-(field2.sorted?.sort_index||-1))).map((field=>{if(field.sorted)return{id:field.name,desc:field.sorted.desc}})).filter(Boolean)),handleTableSort=(0,react.useCallback)(((header,e)=>{if(header?.column?.getCanSort()){const currentSortingIndex=sorting.findIndex((column=>column.id===header.id)),currentDesc=!!sorting[currentSortingIndex]?.desc,draftColumnConfig={id:header.id,desc:!currentDesc};if(e.shiftKey){const draftSorting=[...sorting];currentSortingIndex>=0?draftSorting[currentSortingIndex]=draftColumnConfig:draftSorting.push(draftColumnConfig),setSorting(draftSorting)}else setSorting([draftColumnConfig])}}),[sorting]),columnVisibility=fields.measures.reduce(((acc,{name},i)=>{const seriesConfig=Array.isArray(series)?series[i]:series[name];return name.includes("$$$_row_total_$$$")?(acc[name]=show_row_totals,acc):(acc[name]=seriesConfig?.visible??!0,acc)}),{});return{table:(0,index_production.useReactTable)({data,columns,getCoreRowModel:(0,index_production.getCoreRowModel)(),getSortedRowModel:(0,index_production.getSortedRowModel)(),state:{columnOrder:column_order,columnPinning:{left:[],right:[]},sorting,columnVisibility},onStateChange:noop_default(),renderFallbackValue:null}),sorting,handleTableSort}};var useTranslationBase=__webpack_require__("../i18n/src/useTranslationBase.ts"),en=__webpack_require__("../visualizations-table/src/locales/resources/en.ts");var SwapVert_esm=__webpack_require__("../../node_modules/@styled-icons/material/SwapVert/SwapVert.esm.js"),KeyboardArrowDown_esm=__webpack_require__("../../node_modules/@styled-icons/material/KeyboardArrowDown/KeyboardArrowDown.esm.js"),KeyboardArrowUp_esm=__webpack_require__("../../node_modules/@styled-icons/material/KeyboardArrowUp/KeyboardArrowUp.esm.js");var d3_hsv=__webpack_require__("../../node_modules/d3-hsv/index.js");const fallbackVal=(v1,v2)=>isNaN(v1)?fallbackVal(v2,0):v1,CellVisualization=props=>{const{colors}=(0,styled_components_browser_esm.Fg)(),{max,value,color=colors.measure}=props;if(0===max)return null;const cellVisWidth=value/max,colorBands=((baseColor=constants.Li[0],targetColor=constants.Li[1],steps=5)=>{const colorStops=Math.max(steps-1,1),baseHSV=(0,d3_hsv.mC)(baseColor),targetHSV=(0,d3_hsv.mC)(targetColor),baseHue=fallbackVal(baseHSV.h,targetHSV.h),targetHue=fallbackVal(targetHSV.h,baseHSV.h),baseSat=fallbackVal(baseHSV.s,targetHSV.s),targetSat=fallbackVal(targetHSV.s,baseHSV.s),{v:baseVal}=baseHSV,{v:targetVal}=targetHSV,hPerStep=(targetHue-baseHue)/colorStops,sPerStep=(targetSat-baseSat)/colorStops,vPerStep=(targetVal-baseVal)/colorStops;return new Array(steps).fill("").map(((_,i)=>(0,d3_hsv.mC)(baseHue+hPerStep*i,baseSat+sPerStep*i,baseVal+vPerStep*i).hex()))})(color,colors.background,10),colorIndex=Math.round(10*(1-cellVisWidth));return react.createElement(SingleBar,{color:colorBands[colorIndex],width:cellVisWidth,"data-testid":"single-bar"})},SingleBar=styled_components_browser_esm.ZP.div.attrs((({width,color})=>({style:{flex:width,background:color}})))`
  height: ${({theme})=>theme.sizes.small};
`;try{CellVisualization.displayName="CellVisualization",CellVisualization.__docgenInfo={description:"",displayName:"CellVisualization",props:{min:{defaultValue:null,description:"",name:"min",required:!0,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"number"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-table/src/CellVisualization/index.tsx#CellVisualization"]={docgenInfo:CellVisualization.__docgenInfo,name:"CellVisualization",path:"../visualizations-table/src/CellVisualization/index.tsx#CellVisualization"})}catch(__react_docgen_typescript_loader_error){}var numeral=__webpack_require__("../../node_modules/numeral/numeral.js"),numeral_default=__webpack_require__.n(numeral),get=__webpack_require__("../../node_modules/lodash/get.js"),get_default=__webpack_require__.n(get);const Table=({config={column_order:[],show_row_numbers:!0,type:"table"},data=[],fields=constants.jS,height=constants.R$,pivots,width,totals,defaultRowHeight})=>{const{t}=(ns="Table",(0,useTranslationBase.l)(en.en,ns,options));var ns,options;const scrollContainer=(0,react.useRef)(null),{virtualRows,OffsetTop,OffsetBottom}=useVirtual({data,scrollContainer,defaultRowHeight}),{table,sorting,handleTableSort}=useHeadlessTable({data,config,fields,pivots}),tableRows=table.getRowModel().rows,{series={},show_row_numbers,truncate_text,truncate_header,show_totals=!1}=config,seriesMinMax=Object.fromEntries(fields.measures.map((({name})=>[name,{min:(0,getSeriesMin._)(name,data),max:(0,getSeriesMax.q)(name,data)}]))),headerGroups=table.getHeaderGroups(),rowNumWidth=14*String(data.length).length;return react.createElement(ScrollWrapper,{width,height,ref:scrollContainer},react.createElement(TableElement,{cellSpacing:"0"},react.createElement(THead,null,headerGroups.map(((headerGroup,i)=>react.createElement("tr",{key:`theadRow${i}`},show_row_numbers?react.createElement(TableHeadCell,{width:rowNumWidth}):void 0,headerGroup.headers.map((header=>{const{header:headerContent}=header.column.columnDef,columnSortState=sorting.find((s=>s.id===header.id)),{SortIcon,sortText,ariaSort}=((t,columnSortState)=>void 0===columnSortState?{SortIcon:SwapVert_esm.b,sortText:t("Shift + Click to sort additional columns",{ns:"Table"}),ariaSort:"none"}:columnSortState.desc?{SortIcon:KeyboardArrowDown_esm.W,sortText:t("Sort ascending",{ns:"Table"}),ariaSort:"descending"}:{SortIcon:KeyboardArrowUp_esm.Q,sortText:t("Sort descending",{ns:"Table"}),ariaSort:"ascending"})(t,columnSortState);return react.createElement(TableHeadCell,{key:header.id,colSpan:header.colSpan,"aria-sort":ariaSort,width:header.column.getSize()},react.createElement(TableHeadLayout,{sortButtonDefaultVisible:!!columnSortState},react.createElement(HeaderContentWrapper,{truncateHeader:!!truncate_header,"data-testid":"columnheader-label"},(0,index_production.flexRender)(headerContent,header.getContext())),i===headerGroups.length-1&&react.createElement(IconButton.h,{icon:react.createElement(SortIcon,null),label:sortText,outline:!0,shape:"square",size:"xxsmall",onClick:e=>handleTableSort(header,e)})))})))))),react.createElement("tbody",null,react.createElement(OffsetTop,null),virtualRows.map((({index,measureElement})=>{const tableRow=tableRows[index];return react.createElement(TableRow,{key:tableRow.id},show_row_numbers?react.createElement(RowNum,null,index+1):void 0,tableRow?.getVisibleCells?.().map((({column,getContext,...cell})=>{const measureIndex=fields.measures.findIndex((m=>m.name===column.id)),columnConfig=Array.isArray(series)?series[measureIndex]:series[column.id],{cell:cellContent}=column.columnDef,{max,min}=seriesMinMax?.[column.id]||{max:1/0,min:0},valueFormat=Array.isArray(series)?get_default()(series,[measureIndex,"value_format"]):get_default()(series,[column.id,"value_format"]),CellValue=cell.getValue();return react.createElement(TableCell,{key:cell.id,ref:measureElement,width:column.getSize()},"function"==typeof CellValue?react.createElement(CellValue,null):react.createElement(CellContentLayout,null,columnConfig?.cell_visualization?react.createElement(CellVisualization,{color:columnConfig.color,min,max,value:Number(cell.getValue())}):null,react.createElement(CellContentWrapper,{truncateText:!!truncate_text},valueFormat?numeral_default()(Number(cell.getValue())).format(valueFormat):(0,index_production.flexRender)(cellContent,getContext()))))})))})),react.createElement(OffsetBottom,null)),react.createElement(TFoot,null,show_totals&&totals?table.getHeaderGroups().map(((headerGroup,i)=>react.createElement("tr",{key:`tfootRow${i}`},headerGroup.headers.map(((header,index)=>{const totalsText=t("Totals"),measureIndex=fields.measures.findIndex((m=>m.name===header.id)),valueFormat=Array.isArray(series)?get_default()(series,[measureIndex,"value_format"]):get_default()(series,[header.id,"value_format"]);return 0===index?react.createElement(TableHeadCell,{key:`${header.id||null}-foot`,colSpan:show_row_numbers?2:1},totalsText):react.createElement(TableHeadCell,{key:`${header.id||null}-foot`},valueFormat?numeral_default()(Number(totals[header.id])).format(valueFormat):totals[header.id]||null)}))))):null)))},CellContentWrapper=({children,truncateText})=>truncateText?react.createElement(Grid.r,{columns:1,width:"auto"},react.createElement(Truncate.k,null,children)):react.createElement(react.Fragment,null,children),HeaderContentWrapper=({truncateHeader,...props})=>truncateHeader?react.createElement(Truncate.k,props):react.createElement(Box.x,props),ScrollWrapper=styled_components_browser_esm.ZP.div`
  max-height: ${({height})=>`${height}px`};
  overflow: auto;
  max-width: ${({width})=>width?`${width}px`:"100%"};
  position: relative;
`,TableElement=styled_components_browser_esm.ZP.table`
  width: 100%;
  color: ${({theme})=>theme.colors.text5};
  font-family: ${({theme})=>theme.fonts.body};
`,THead=styled_components_browser_esm.ZP.thead`
  top: 0;
  position: sticky;
`,TFoot=styled_components_browser_esm.ZP.tfoot`
  position: sticky;
  bottom: 0px;
`,TableCellStyles=styled_components_browser_esm.iv`
  border-right: 1px solid ${({theme})=>theme.colors.ui2};
  font-size: ${({theme})=>theme.fontSizes.small};
  line-height: ${({theme})=>theme.lineHeights.small};
  padding: ${({theme})=>styled_components_browser_esm.iv`
      ${theme.space.xxsmall} ${theme.space.xsmall}
    `};
  width: ${({width})=>width}px;
  &:last-child {
    border-right: none;
  }
`,TableCell=styled_components_browser_esm.ZP.td`
  ${TableCellStyles}
`,RowNum=(0,styled_components_browser_esm.ZP)(TableCell)`
  border-right: 1px solid ${({theme})=>theme.colors.ui4};
  text-align: right;
  width: 1rem;
`,TableHeadCell=styled_components_browser_esm.ZP.th`
  ${TableCellStyles}
  text-align: left;
  background: ${({theme})=>theme.colors.background};
  border-bottom: 1px solid ${({theme})=>theme.colors.ui4};
`,TableRow=styled_components_browser_esm.ZP.tr`
  :nth-child(even) {
    background-color: ${({theme})=>theme.colors.ui1};
  }
`,CellContentLayout=styled_components_browser_esm.ZP.div`
  align-items: center;
  display: flex;
  gap: ${({theme})=>theme.space.xxsmall};
`,TableHeadLayout=styled_components_browser_esm.ZP.div`
  display: grid;
  grid-template-columns: minMax(${({theme})=>theme.space.u16}, 1fr) auto;
  ${IconButton.h} {
    ${({sortButtonDefaultVisible})=>sortButtonDefaultVisible?styled_components_browser_esm.iv`
            visibility: visible;
          `:styled_components_browser_esm.iv`
            visibility: hidden;
          `}
  }
  &:hover {
    ${IconButton.h} {
      visibility: visible;
    }
  }
`;try{Table.displayName="Table",Table.__docgenInfo={description:"",displayName:"Table",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"SDKRecord[]"}},config:{defaultValue:{value:"{ column_order: [], show_row_numbers: true, type: 'table' }"},description:"",name:"config",required:!1,type:{name:"CTable"}},fields:{defaultValue:{value:"{\n  dimensions: [],\n  measures: [],\n  pivots: [],\n}"},description:"",name:"fields",required:!1,type:{name:"Fields"}},pivots:{defaultValue:null,description:"",name:"pivots",required:!1,type:{name:"Pivots"}},totals:{defaultValue:null,description:"",name:"totals",required:!1,type:{name:"Record<string, number>"}},row_totals:{defaultValue:null,description:"",name:"row_totals",required:!1,type:{name:"Record<string, number>"}},defaultRowHeight:{defaultValue:null,description:"",name:"defaultRowHeight",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-table/src/Table/index.tsx#Table"]={docgenInfo:Table.__docgenInfo,name:"Table",path:"../visualizations-table/src/Table/index.tsx#Table"})}catch(__react_docgen_typescript_loader_error){}},"../visualizations-table/src/locales/resources/en.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{en:()=>en});const en={locale:"en",resources:{en:{Table:{"Shift + Click to sort additional columns":"Shift + Click to sort additional columns","Sort ascending":"Sort ascending","Sort descending":"Sort descending",Totals:"Totals"}}}}},"../visualizations-visx/src/Sparkline/Sparkline.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>Sparkline});__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.reduce.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.reduce.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.flat-map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.flat-map.js");var react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_visx_shape__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../node_modules/@visx/shape/esm/shapes/LinePath.js"),_visx_point__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/@visx/point/esm/Point.js"),_looker_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../components/src/utils/useMeasuredElement.ts"),_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../visualizations-adapters/src/utils/constants.ts"),_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../visualizations-adapters/src/utils/isNumeric.ts"),_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../visualizations-adapters/src/VisWrapper/VisWrapper.tsx"),_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../visualizations-visx/src/utils/getSeriesColor.ts");const Sparkline=({data=[],config,fields,height=_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_9__.R$,width})=>{const{series={}}=config||{},firstMeasure=fields.measures[0],firstSeries=Array.isArray(series)?series[0]:series[firstMeasure.name||""],themeContext=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.Fg)(),[wrapperRef,setWrapperRef]=(0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(null),[wrapperRect,refreshRect]=(0,_looker_components__WEBPACK_IMPORTED_MODULE_11__.h)(wrapperRef);(0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((()=>{refreshRect()}),[wrapperRef,refreshRect]);const{line_width:lineWidth=3}=firstSeries||{},{dataSet,dataMin,dataMax}=data?.reduce((({dataSet,dataMin,dataMax},d)=>{const val=d[firstMeasure.name];return{dataSet:[...dataSet,val],dataMin:(0,_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_12__.k)(val)?Math.min(dataMin,Number(val)):dataMin,dataMax:(0,_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_12__.k)(val)?Math.max(dataMax,Number(val)):dataMax}}),{dataSet:[],dataMin:1/0,dataMax:-1/0})??{},[configMin,configMax]=config?.y_axis?.[0]?.range||[],chartPoints=(({data,chartDimensions,yRange,lineWidth})=>{const dataChunks=(data=>data.reduce(((chunks,d)=>(null===d?chunks.push([]):chunks[chunks.length-1].push(d),chunks)),[[]]))(data),[yMin,yMax]=yRange,chartPadding=lineWidth/2,chartWidth=chartDimensions.width-2*chartPadding,chartHeight=chartDimensions.height-2*chartPadding,pointSpacing=chartWidth/Math.max(data.length-1,1),valueRange=yMax-yMin;return dataChunks.map(((chunk,chunkId)=>{const countFrom=dataChunks.slice(0,chunkId).flatMap((c=>c)).length;return chunk.map(((d,i)=>new _visx_point__WEBPACK_IMPORTED_MODULE_8__.Z({x:(i+countFrom+chunkId)*pointSpacing+chartPadding,y:chartHeight-(Number(d)-yMin)/valueRange*chartHeight+chartPadding})))}))})({chartDimensions:{width:width||wrapperRect.width,height},data:dataSet||[],lineWidth:lineWidth||1,yRange:[(0,_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_12__.k)(configMin)?configMin:dataMin,(0,_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_12__.k)(configMax)?configMax:dataMax]});return data&&0!==data.length?react__WEBPACK_IMPORTED_MODULE_7__.createElement(_looker_visualizations_adapters__WEBPACK_IMPORTED_MODULE_13__.T,{ref:setWrapperRef},react__WEBPACK_IMPORTED_MODULE_7__.createElement("svg",{width,height,"data-testid":"sparkline-chart"},chartPoints.length&&chartPoints.map(((chunk,i)=>react__WEBPACK_IMPORTED_MODULE_7__.createElement(_visx_shape__WEBPACK_IMPORTED_MODULE_14__.Z,{key:i,data:chunk,stroke:(0,_utils__WEBPACK_IMPORTED_MODULE_15__._)(firstSeries,themeContext),strokeWidth:lineWidth,x:d=>d.x||0,y:d=>d.y||0}))))):null};try{Sparkline.displayName="Sparkline",Sparkline.__docgenInfo={description:"",displayName:"Sparkline",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"SDKRecord[]"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"CSparkline"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Sparkline/Sparkline.tsx#Sparkline"]={docgenInfo:Sparkline.__docgenInfo,name:"Sparkline",path:"../visualizations-visx/src/Sparkline/Sparkline.tsx#Sparkline"})}catch(__react_docgen_typescript_loader_error){}},"../visualizations-visx/src/locales/resources/en.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{en:()=>en});const en={locale:"en",resources:{en:{PieLegend:{"Legend page {{page}} of {{totalPages}}":"Legend page {{page}} of {{totalPages}}"},PieLegendControls:{"Next page":"Next page","Previous page":"Previous page"},XYTooltip:{"Points sized by":"Points sized by"}}}}},"../visualizations-visx/src/utils/getSeriesColor.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>getSeriesColor});const getSeriesColor=(series,lookerTheme)=>series?.color?series.color:lookerTheme.colors.key},"../visualizations/src/QueryError/QueryError.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>QueryError});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_looker_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../components/src/Layout/Space/SpaceVertical/SpaceVertical.tsx"),_looker_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../components/src/Layout/Space/Space/Space.tsx"),_looker_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../components/src/Icon/Icon.tsx"),_styled_icons_material_ErrorOutline__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@styled-icons/material/ErrorOutline/ErrorOutline.esm.js"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../visualizations/src/utils/useTranslation.ts");const QueryError=({message})=>{const{t}=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.$)("QueryError");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_looker_components__WEBPACK_IMPORTED_MODULE_2__.s,{p:"medium",gap:"xxsmall"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_looker_components__WEBPACK_IMPORTED_MODULE_3__.T,{justify:"center"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_looker_components__WEBPACK_IMPORTED_MODULE_4__.J,{icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styled_icons_material_ErrorOutline__WEBPACK_IMPORTED_MODULE_5__.M,null),size:"large",color:"ui4"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_looker_components__WEBPACK_IMPORTED_MODULE_3__.T,{justify:"center",color:"text2",gap:"xxsmall"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong",null,t("Error"),":"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,message)))};try{QueryError.displayName="QueryError",QueryError.__docgenInfo={description:"",displayName:"QueryError",props:{message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations/src/QueryError/QueryError.tsx#QueryError"]={docgenInfo:QueryError.__docgenInfo,name:"QueryError",path:"../visualizations/src/QueryError/QueryError.tsx#QueryError"})}catch(__react_docgen_typescript_loader_error){}},"../visualizations/src/Visualization/Visualization.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>Visualization});var react=__webpack_require__("../../node_modules/react/index.js"),ComponentsProvider=__webpack_require__("../components-providers/src/ComponentsProvider.tsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Table=__webpack_require__("../visualizations-table/src/Table/index.tsx"),AreaSeries=(__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/AreaSeries.js")),AreaStack=__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/AreaStack.js"),DataProvider=__webpack_require__("../../node_modules/@visx/xychart/esm/providers/DataProvider.js"),XYChart=__webpack_require__("../../node_modules/@visx/xychart/esm/components/XYChart.js"),constants=__webpack_require__("../visualizations-adapters/src/utils/constants.ts"),VisWrapper=__webpack_require__("../visualizations-adapters/src/VisWrapper/VisWrapper.tsx"),DataContext=__webpack_require__("../../node_modules/@visx/xychart/esm/context/DataContext.js"),Ordinal=__webpack_require__("../../node_modules/@visx/legend/esm/legends/Ordinal.js"),partial=__webpack_require__("../../node_modules/lodash/partial.js"),partial_default=__webpack_require__.n(partial),findIndex=__webpack_require__("../../node_modules/lodash/findIndex.js"),findIndex_default=__webpack_require__.n(findIndex),isArray=__webpack_require__("../../node_modules/lodash/isArray.js"),isArray_default=__webpack_require__.n(isArray);const pickSeriesByName=(fields,config,key)=>{const{series:seriesList}=config;if(isArray_default()(seriesList)){return seriesList[findIndex_default()(fields.measures,{name:key})]}return seriesList?.[key]||{}};var find=__webpack_require__("../../node_modules/lodash/find.js"),find_default=__webpack_require__.n(find);const seriesLabelFormatter=(fields,config,item)=>{const closestSeries=pickSeriesByName(fields,config,item),field=find_default()([...fields.measures,...fields.dimensions],{name:item}),pivoted_label=field&&field?.pivoted_label,fallback=item.split(".").pop()||"";return closestSeries.label||pivoted_label||field?.label||fallback.replace(/_/g," ")},XYLegend=({chartWidth,config,fields})=>{const{colorScale={},theme:visxTheme,margin}=(0,react.useContext)(DataContext.Z),{space:{xsmall,small}}=(0,styled_components_browser_esm.Fg)(),{legend}=config;if(!legend)return react.createElement(react.Fragment,null);const legendWidth=legend.width||200,yAxisSpacer="left"===legend.position||"right"===legend.position?void 0:margin?.left,{direction,...legendStyle}={bottom:{direction:"row",marginLeft:yAxisSpacer,marginTop:small,width:`calc(${chartWidth?`${chartWidth}px`:"100%"} - ${yAxisSpacer}px)`},top:{direction:"row",marginLeft:yAxisSpacer,marginBottom:small,width:`calc(${chartWidth?`${chartWidth}px`:"100%"} - ${yAxisSpacer}px)`},left:{direction:"column",width:legendWidth},right:{direction:"column",width:legendWidth}}[legend.position];return react.createElement(Ordinal.Z,{direction,itemMargin:`0 ${small} ${xsmall} ${small}`,labelFormat:partial_default()(seriesLabelFormatter,fields,config),style:{color:visxTheme?.svgLabelBig.fill,display:"flex",flexShrink:0,flexWrap:"wrap",justifyContent:"center",...legendStyle},scale:colorScale,shape:"line"})};try{XYLegend.displayName="XYLegend",XYLegend.__docgenInfo={description:"",displayName:"XYLegend",props:{chartWidth:{defaultValue:null,description:"",name:"chartWidth",required:!1,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CCartesian"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/XYLegend/XYLegend.tsx#XYLegend"]={docgenInfo:XYLegend.__docgenInfo,name:"XYLegend",path:"../visualizations-visx/src/XYLegend/XYLegend.tsx#XYLegend"})}catch(__react_docgen_typescript_loader_error){}var get=__webpack_require__("../../node_modules/lodash/get.js"),get_default=__webpack_require__.n(get),getDimensionNames=__webpack_require__("../visualizations-adapters/src/utils/getDimensionNames.ts"),getMeasureNames=__webpack_require__("../visualizations-adapters/src/utils/getMeasureNames.ts"),pick=__webpack_require__("../../node_modules/lodash/pick.js"),pick_default=__webpack_require__.n(pick);const concatDimensions=(data,fields)=>{const dimensionNames=(0,getDimensionNames.N)(fields),measureNames=(0,getMeasureNames.g)(fields);return data.map((datum=>({dimension:dimensionNames.map((name=>datum[name])).join(" - "),...pick_default()(datum,measureNames)})))};var esm_extends=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),ThemeContext=(__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.every.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.every.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.flat-map.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.flat-map.js"),__webpack_require__("../../node_modules/@visx/xychart/esm/context/ThemeContext.js"));__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.reduce.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.reduce.js");const pickLongestLabel=labels=>labels.reduce(((longestLabel,label)=>label.length>longestLabel.length?label:longestLabel),"");var noop=__webpack_require__("../../node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop);const useMeasuredText=(text,theme)=>{const{fontSize,fontFamily}=theme,[elementRect,setElementRect]=(0,react.useState)({bottom:0,height:10,left:0,right:0,toJSON:noop_default(),top:0,width:10,x:0,y:0});return(0,react.useLayoutEffect)((()=>{const textWrapper=document.createElement("SPAN"),textNode=document.createTextNode(text);textWrapper.style.fontSize="number"==typeof fontSize?`${fontSize}px`:fontSize,textWrapper.style.fontFamily=fontFamily,textWrapper.appendChild(textNode),document.body.appendChild(textWrapper);let componentIsMounted=!0;const req=requestAnimationFrame((()=>{if(componentIsMounted){const elementRect=textWrapper.getBoundingClientRect();setElementRect(elementRect),document.body.removeChild(textWrapper)}}));return()=>{componentIsMounted=!1,cancelAnimationFrame(req),document.body.contains(textWrapper)&&document.body.removeChild(textWrapper)}}),[text,fontFamily,fontSize]),elementRect};__webpack_require__("../../node_modules/core-js/modules/esnext.async-iterator.filter.js"),__webpack_require__("../../node_modules/core-js/modules/esnext.iterator.filter.js");const getVisibleMeasureNames=(fields=constants.jS,config)=>{const{measures=[]}=fields;return measures.filter(((measure,index)=>!config.series||(isArray_default()(config.series)?config?.series?.[index]?.visible:config?.series?.[measure.name]?.visible))).map((measure=>measure.name))};var isNumeric=__webpack_require__("../visualizations-adapters/src/utils/isNumeric.ts"),Text=__webpack_require__("../../node_modules/@visx/text/esm/Text.js"),numeral=__webpack_require__("../../node_modules/numeral/numeral.js"),numeral_default=__webpack_require__.n(numeral),isValid=__webpack_require__("../../node_modules/date-fns/esm/isValid/index.js"),format=__webpack_require__("../../node_modules/date-fns/esm/format/index.js"),parseISO=__webpack_require__("../../node_modules/date-fns/esm/parseISO/index.js");const isDateQuery=fields=>1===fields.dimensions.length&&fields.dimensions[0].is_timeframe,formatDateLabel=({dateString,fields})=>{const dateObj=(0,parseISO.Z)(dateString);if(isDateQuery(fields)&&(0,isValid.Z)(dateObj)){const{type}=fields.dimensions[0];if("date_year"===type)return(0,format.Z)(dateObj,"yyyy");if("date_month"===type)return(0,format.Z)(dateObj,"MMMM yy");if("date_date"===type||"date_week"===type)return(0,format.Z)(dateObj,"LLL d")}return dateString},Tick=({formattedValue,fields,valueFormat,...tickProps})=>{const isNumericTick=(0,isNumeric.k)(formattedValue),label=formatDateLabel({dateString:formattedValue||"",fields}),renderedLabel=label.length>20?`${label.slice(0,20).trim()}`:label;return react.createElement(Text.Z,tickProps,valueFormat&&isNumericTick?numeral_default()(formattedValue).format(valueFormat):renderedLabel)};try{20..displayName="MAX_TICK_LABEL_LENGTH",20..__docgenInfo={description:"All tick labels longer than this will be truncated",displayName:"MAX_TICK_LABEL_LENGTH",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Axis/Tick.tsx#MAX_TICK_LABEL_LENGTH"]={docgenInfo:20..__docgenInfo,name:"MAX_TICK_LABEL_LENGTH",path:"../visualizations-visx/src/Axis/Tick.tsx#MAX_TICK_LABEL_LENGTH"})}catch(__react_docgen_typescript_loader_error){}try{Tick.displayName="Tick",Tick.__docgenInfo={description:"Tick component typically used in the tickComponent prop of\nvisx <Axis> components",displayName:"Tick",props:{fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},valueFormat:{defaultValue:null,description:"",name:"valueFormat",required:!1,type:{name:"string | null"}},className:{defaultValue:null,description:"className to apply to the SVGText element.",name:"className",required:!1,type:{name:"string"}},scaleToFit:{defaultValue:null,description:"Whether to scale the fontSize to accommodate the specified width.",name:"scaleToFit",required:!1,type:{name:'boolean | "shrink-only"'}},angle:{defaultValue:null,description:"Rotational angle of the text.",name:"angle",required:!1,type:{name:"number"}},textAnchor:{defaultValue:null,description:"Horizontal text anchor.",name:"textAnchor",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"start"'},{value:'"middle"'},{value:'"end"'}]}},verticalAnchor:{defaultValue:null,description:"Vertical text anchor.",name:"verticalAnchor",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"middle"'},{value:'"end"'}]}},style:{defaultValue:null,description:"Styles to be applied to the text (and used in computation of its size).",name:"style",required:!1,type:{name:"CSSProperties"}},innerRef:{defaultValue:null,description:"Ref passed to the Text SVG element.",name:"innerRef",required:!1,type:{name:"Ref<SVGSVGElement>"}},innerTextRef:{defaultValue:null,description:"Ref passed to the Text text element",name:"innerTextRef",required:!1,type:{name:"Ref<SVGTextElement>"}},x:{defaultValue:null,description:"x position of the text.",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:null,description:"y position of the text.",name:"y",required:!1,type:{name:"number"}},dx:{defaultValue:null,description:"dx offset of the text.",name:"dx",required:!1,type:{name:"string | number"}},dy:{defaultValue:null,description:"dy offset of the text.",name:"dy",required:!1,type:{name:"string | number"}},lineHeight:{defaultValue:null,description:'Desired "line height" of the text, implemented as y offsets.',name:"lineHeight",required:!1,type:{name:"string | number"}},capHeight:{defaultValue:null,description:"Cap height of the text.",name:"capHeight",required:!1,type:{name:"string | number"}},fontSize:{defaultValue:null,description:"Font size of text.",name:"fontSize",required:!1,type:{name:"string | number"}},fontFamily:{defaultValue:null,description:"Font family of text.",name:"fontFamily",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"Fill color of text.",name:"fill",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"Maximum width to occupy (approximate as words are not split).",name:"width",required:!1,type:{name:"number"}},children:{defaultValue:null,description:"String (or number coercible to one) to be styled and positioned.",name:"children",required:!1,type:{name:"string | number"}},formattedValue:{defaultValue:null,description:"",name:"formattedValue",required:!0,type:{name:"FormattedValue"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Axis/Tick.tsx#Tick"]={docgenInfo:Tick.__docgenInfo,name:"Tick",path:"../visualizations-visx/src/Axis/Tick.tsx#Tick"})}catch(__react_docgen_typescript_loader_error){}var Axis=__webpack_require__("../../node_modules/@visx/xychart/esm/components/axis/Axis.js");const XAxisDate=({label,showTicks})=>react.createElement(Axis.Z,{hideTicks:!showTicks,label,labelOffset:showTicks?void 0:0,orientation:"bottom",tickValues:showTicks?void 0:[]});try{XAxisDate.displayName="XAxisDate",XAxisDate.__docgenInfo={description:"Axis component to be used when using a time scale",displayName:"XAxisDate",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},showTicks:{defaultValue:null,description:"",name:"showTicks",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Axis/XAxisDate.tsx#XAxisDate"]={docgenInfo:XAxisDate.__docgenInfo,name:"XAxisDate",path:"../visualizations-visx/src/Axis/XAxisDate.tsx#XAxisDate"})}catch(__react_docgen_typescript_loader_error){}const XAxis=({fields,label,labelDy,showTicks,tickAngle,tickTextAnchor,tickSpace,valueFormat})=>{const visxTheme=(0,react.useContext)(ThemeContext.Z),{width=0}=(0,react.useContext)(DataContext.Z),numTicks=Math.floor(width/tickSpace);return react.createElement(Axis.Z,{hideTicks:!showTicks,label,labelOffset:showTicks?void 0:0,labelProps:{...visxTheme.axisStyles.x.bottom.axisLabel,dy:labelDy},orientation:"bottom",numTicks,tickComponent:tickProps=>showTicks?react.createElement(Tick,(0,esm_extends.Z)({fields,valueFormat},tickProps)):null,tickLabelProps:()=>({angle:tickAngle,textAnchor:tickTextAnchor})})};try{XAxis.displayName="XAxis",XAxis.__docgenInfo={description:"",displayName:"XAxis",props:{fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},labelDy:{defaultValue:null,description:"",name:"labelDy",required:!0,type:{name:"number"}},showTicks:{defaultValue:null,description:"",name:"showTicks",required:!1,type:{name:"boolean"}},tickAngle:{defaultValue:null,description:"",name:"tickAngle",required:!0,type:{name:"number"}},tickTextAnchor:{defaultValue:null,description:"",name:"tickTextAnchor",required:!0,type:{name:"enum",value:[{value:'"inherit"'},{value:'"start"'},{value:'"middle"'},{value:'"end"'}]}},tickSpace:{defaultValue:null,description:"",name:"tickSpace",required:!0,type:{name:"number"}},valueFormat:{defaultValue:null,description:"",name:"valueFormat",required:!1,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Axis/XAxis.tsx#XAxis"]={docgenInfo:XAxis.__docgenInfo,name:"XAxis",path:"../visualizations-visx/src/Axis/XAxis.tsx#XAxis"})}catch(__react_docgen_typescript_loader_error){}const YAxis=({showTicks,label,labelDx,valueFormat,fields})=>{const visxTheme=(0,react.useContext)(ThemeContext.Z);return react.createElement(Axis.Z,{hideTicks:!showTicks,label,labelOffset:showTicks?void 0:0,labelProps:{...visxTheme.axisStyles.y.left.axisLabel,dx:labelDx},tickComponent:tickProps=>showTicks?react.createElement(Tick,(0,esm_extends.Z)({fields,valueFormat},tickProps)):null,orientation:"left"})};try{YAxis.displayName="YAxis",YAxis.__docgenInfo={description:"",displayName:"YAxis",props:{fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},showTicks:{defaultValue:null,description:"",name:"showTicks",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},labelDx:{defaultValue:null,description:"",name:"labelDx",required:!0,type:{name:"number"}},valueFormat:{defaultValue:null,description:"",name:"valueFormat",required:!1,type:{name:"string | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Axis/YAxis.tsx#YAxis"]={docgenInfo:YAxis.__docgenInfo,name:"YAxis",path:"../visualizations-visx/src/Axis/YAxis.tsx#YAxis"})}catch(__react_docgen_typescript_loader_error){}var getDataRange=__webpack_require__("../visualizations-adapters/src/utils/getDataRange.ts");const getYAxisRange=({config,data,fields})=>{const[configMin="auto",configMax="auto"]=config?.y_axis?.[0]?.range||[],[dataMin,dataMax]=(0,getDataRange.O)({config,data,fields});return["auto"===configMin?Math.min(0,Math.floor(dataMin)):Number(configMin),"auto"===configMax?Math.max(0,Math.ceil(dataMax)):Number(configMax)]},getYAxisFormat=config=>{const{series={},positioning=""}=config,isPercent="percent"===positioning;if(!(1!==series.length&&1!==Object.keys(series).length)){return Array.isArray(series)?series[0].value_format:Object.values(series)[0].value_format}return isPercent?constants.tG:constants.H7},getXAxisFormat=fields=>{if(void 0===fields)return"";const{dimensions=""}=fields;if(dimensions&&1===dimensions.length){const{value_format}=dimensions[0];return value_format}return constants.H7},useAxis=({config,data,fields})=>{const visxTheme=(0,react.useContext)(ThemeContext.Z),xAxisLabels=data.map((datum=>formatDateLabel({dateString:datum.dimension,fields}).slice(0,20))),xAxisLongestLabel=pickLongestLabel(xAxisLabels),{height:xAxisLongestLabelHeight,width:xAxisLongestLabelWidth}=useMeasuredText(xAxisLongestLabel,{fontFamily:visxTheme.axisStyles.x.bottom.tickLabel.fontFamily||"Roboto",fontSize:visxTheme.axisStyles.x.bottom.tickLabel.fontSize||"1rem"}),averageLabelLength=xAxisLabels.join("").length/xAxisLabels.length,renderXAxisTicks=config?.x_axis?.[0]?.values,hasRotatedXAxisLabels=renderXAxisTicks&&averageLabelLength>10,angledLabelHypotenuse=Math.sqrt(xAxisLongestLabelWidth*xAxisLongestLabelWidth/2)+10,X_AXIS_STYLE=hasRotatedXAxisLabels?{labelDy:angledLabelHypotenuse,tickAngle:-45,tickSpace:2*xAxisLongestLabelHeight,tickTextAnchor:"end"}:{labelDy:0,tickAngle:0,tickSpace:xAxisLongestLabelWidth+constants.jK,tickTextAnchor:"inherit"},xAxisValueFormat=getXAxisFormat(fields),renderYAxisTicks=config?.y_axis?.[0]?.values;let yAxisLongestLabel;if(fields.measures.every((measure=>measure.is_numeric))){const dataRangeStrings=getYAxisRange({config,data,fields}).map((d=>String(Math.round(d))));yAxisLongestLabel=pickLongestLabel(dataRangeStrings)}else{const measureNames=getVisibleMeasureNames(fields,config),measureValues=data.flatMap((d=>Object.values(pick_default()(d,measureNames)).map((value=>String(value)))));yAxisLongestLabel=pickLongestLabel(measureValues)}const{width:yAxisLongestLabelWidth}=useMeasuredText(yAxisLongestLabel,{fontFamily:visxTheme.axisStyles.y.left.tickLabel.fontFamily||"Roboto",fontSize:visxTheme.axisStyles.y.left.tickLabel.fontSize||"1rem"}),yAxisLabelDx=renderYAxisTicks?-yAxisLongestLabelWidth-10:-10,yAxisValueFormat=getYAxisFormat(config),yAxisLabelWidth=renderYAxisTicks?yAxisLongestLabelWidth+constants.jK:constants.jK;return{XAxis:()=>isDateQuery(fields)&&"column"!==config.type?react.createElement(XAxisDate,{label:config?.x_axis?.[0]?.label||void 0,showTicks:renderXAxisTicks}):react.createElement(XAxis,(0,esm_extends.Z)({showTicks:renderXAxisTicks,fields,label:config?.x_axis?.[0]?.label||void 0,valueFormat:xAxisValueFormat},X_AXIS_STYLE)),YAxis:()=>react.createElement(YAxis,{showTicks:renderYAxisTicks,fields,label:config?.y_axis?.[0]?.label||void 0,labelDx:yAxisLabelDx,valueFormat:yAxisValueFormat}),chartMargin:{top:0,right:0,bottom:hasRotatedXAxisLabels?angledLabelHypotenuse+constants.jK:constants.jK,left:hasRotatedXAxisLabels?Math.max(angledLabelHypotenuse,yAxisLabelWidth):yAxisLabelWidth}}};try{useAxis.displayName="useAxis",useAxis.__docgenInfo={description:"useAxis accepts chart information and outputs axes compatible with\na visx XYChart. It also outputs the proper margin object for the calling\nchart component (necessary when x-axis tick labels are angled).",displayName:"useAxis",props:{config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CCartesian"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ChartData"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/utils/useAxis.tsx#useAxis"]={docgenInfo:useAxis.__docgenInfo,name:"useAxis",path:"../visualizations-visx/src/utils/useAxis.tsx#useAxis"})}catch(__react_docgen_typescript_loader_error){}var compact=__webpack_require__("../../node_modules/lodash/compact.js"),compact_default=__webpack_require__.n(compact),buildChartTheme=__webpack_require__("../../node_modules/@visx/xychart/esm/theme/buildChartTheme.js");const useChartTheme=series=>{const theme=(0,styled_components_browser_esm.Fg)(),seriesList=series&&isArray_default()(series)?series:Object.values(series||{}),scheme=compact_default()(seriesList.map((s=>s.visible&&s.color)));return(0,buildChartTheme.Z)({backgroundColor:theme.colors.background,colors:scheme.length?scheme:[theme.colors.key],gridColor:theme.colors.ui2,gridColorDark:theme.colors.text5,svgLabelBig:{fill:theme.colors.text5},svgLabelSmall:{fill:theme.colors.text5},tickLength:8})},isValidChartData=(data,fields)=>data?.length&&fields?.measures.length,dimensionToDate=(data,fields)=>isDateQuery(fields)?data.map((({dimension,...restDatum})=>({dimension:(0,parseISO.Z)(dimension),...restDatum}))):data,getX=d=>Object.values(d)[0],getY=(d,i)=>Object.values(d)[i+1];var getSeriesMin=__webpack_require__("../visualizations-adapters/src/utils/getSeriesMin.ts"),getSeriesMax=__webpack_require__("../visualizations-adapters/src/utils/getSeriesMax.ts"),Tooltip=__webpack_require__("../../node_modules/@visx/xychart/esm/components/Tooltip.js"),src=__webpack_require__("../components/src/index.ts"),SpaceVertical=__webpack_require__("../components/src/Layout/Space/SpaceVertical/SpaceVertical.tsx"),GlyphCircle=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphCircle.js"),GlyphSquare=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphSquare.js"),GlyphDiamond=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphDiamond.js"),GlyphTriangle=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphTriangle.js");const Glyphs={circle:GlyphCircle.Z,square:GlyphSquare.Z,diamond:GlyphDiamond.Z,triangle:GlyphTriangle.Z,"triangle-down":GlyphTriangle.Z},Glyph=({series,top,left,size,fill,styleObj,stroke})=>{const theme=(0,styled_components_browser_esm.Fg)(),{shape="circle",line_width=1}=series,CurrGlyph=Glyphs[shape],renderedStroke=stroke||series.color||theme.colors.key;return react.createElement(CurrGlyph,{top,left,size,fill:fill||theme.colors.key,transform:"triangle-down"===shape?"rotate(180)":"",style:styleObj||{},stroke:!1===stroke?void 0:renderedStroke,strokeWidth:(()=>{switch(!0){case line_width<3:return line_width;case line_width<8:return.75*line_width;default:return.5*line_width}})()})};try{Glyph.displayName="Glyph",Glyph.__docgenInfo={description:"",displayName:"Glyph",props:{series:{defaultValue:null,description:"",name:"series",required:!0,type:{name:"Partial<CSeriesBasic & CSeriesPoints & CSeriesLine>"}},top:{defaultValue:null,description:"",name:"top",required:!1,type:{name:"number"}},left:{defaultValue:null,description:"",name:"left",required:!1,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},fill:{defaultValue:null,description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:null,description:"",name:"stroke",required:!1,type:{name:"string | false"}},styleObj:{defaultValue:null,description:"",name:"styleObj",required:!1,type:{name:"Record<string, string>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Glyph/Glyph.tsx#Glyph"]={docgenInfo:Glyph.__docgenInfo,name:"Glyph",path:"../visualizations-visx/src/Glyph/Glyph.tsx#Glyph"})}catch(__react_docgen_typescript_loader_error){}var useTranslationBase=__webpack_require__("../i18n/src/useTranslationBase.ts"),en=__webpack_require__("../visualizations-visx/src/locales/resources/en.ts");const useTranslation=(ns,options)=>(0,useTranslationBase.l)(en.en,ns,options),getDefaultGlyphSize=line_width=>Math.round(Math.pow(line_width,2))+20,getRelativeGlyphSize=(data,dataMin,dataMax)=>{const sizePercent=(data-dataMin)/(dataMax-dataMin)+.01;return Math.round(8e3*sizePercent)},DLGroup=({label="",value,preface})=>react.createElement(SpaceVertical.s,{gap:"none"},preface&&react.createElement("em",null,preface),react.createElement("dt",null,label),react.createElement(DD,null,value)),DD=styled_components_browser_esm.ZP.dd.withConfig({displayName:"DLGroup__DD",componentId:"sc-ayqk0v-0"})(["font-weight:bold;margin:0;"]);try{DLGroup.displayName="DLGroup",DLGroup.__docgenInfo={description:"",displayName:"DLGroup",props:{label:{defaultValue:{value:""},description:"",name:"label",required:!1,type:{name:"string"}},preface:{defaultValue:null,description:"",name:"preface",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/DLGroup/DLGroup.tsx#DLGroup"]={docgenInfo:DLGroup.__docgenInfo,name:"DLGroup",path:"../visualizations-visx/src/DLGroup/DLGroup.tsx#DLGroup"})}catch(__react_docgen_typescript_loader_error){}const tooltipStyles=(0,styled_components_browser_esm.iv)(["background-color:",";border-radius:",";color:",";font-family:",";font-size:",";padding:",";pointer-events:none;"],(({theme})=>theme.colors.inverse),(({theme})=>theme.radii.medium),(({theme})=>theme.colors.inverseOn),(({theme})=>theme.fonts.body),(({theme})=>theme.fontSizes.xsmall),(({theme})=>theme.space.u3)),XYTooltip=(0,styled_components_browser_esm.ZP)((({className,config,data,fields,snapToDatum=!0,showDatumGlyph=!0})=>{const{t}=useTranslation("XYTooltip"),theme=(0,styled_components_browser_esm.Fg)(),{tooltips,series}=config;if(!tooltips)return react.createElement(react.Fragment,null);return react.createElement(Tooltip.Z,{className,detectBounds:!0,renderTooltip:({tooltipData})=>{const nearestDatumMeasureName=tooltipData?.nearestDatum?.key||"",datum=data[tooltipData?.nearestDatum?.index||0],nearestSeries=pickSeriesByName(fields,config,nearestDatumMeasureName),dimensionLabel=1===fields.dimensions.length?fields.dimensions[0].label_short:"",valueFormatted=numeral_default()(datum[nearestDatumMeasureName]).format(nearestSeries.value_format),{size_by}=nearestSeries,sizeBySeries=size_by?get_default()(series,size_by):{},sizeByValueFormatted=numeral_default()(datum[nearestSeries.size_by||""]).format(sizeBySeries.value_format);return react.createElement(src.TooltipContent,null,react.createElement(StyledDL,null,react.createElement(SpaceVertical.s,{gap:"u3"},react.createElement(DLGroup,{label:dimensionLabel,value:datum.dimension}),react.createElement(DLGroup,{label:seriesLabelFormatter(fields,config,nearestDatumMeasureName),value:valueFormatted}),nearestSeries.size_by&&react.createElement(DLGroup,{preface:t("Points sized by"),label:seriesLabelFormatter(fields,config,nearestSeries.size_by),value:sizeByValueFormatted}))))},showDatumGlyph,snapTooltipToDatumX:snapToDatum,snapTooltipToDatumY:snapToDatum,unstyled:!0,applyPositionStyle:!0,renderGlyph:({color,key,datum})=>{const nearestSeries=pickSeriesByName(fields,config,key),{line_width=1,size_by}=nearestSeries,size=((sizeByData=0,line_width=3,size_by)=>{const defaultSize=getDefaultGlyphSize(line_width)+20+4*line_width;if(size_by){const sizeByMin=(0,getSeriesMin._)(size_by,data),sizeByMax=(0,getSeriesMax.q)(size_by,data);return sizeByMin!==sizeByMax?getRelativeGlyphSize(sizeByData,sizeByMin,sizeByMax):defaultSize}return defaultSize})(get_default()(datum,size_by||""),line_width,size_by),style=((size,size_by)=>{const scaleValue=Math.round(-.001*size+20)/100+.9;return{stroke:theme.colors.background,transform:`scale(${scaleValue}, ${scaleValue})`,...size_by?{opacity:"0.5",filter:"drop-shadow(1px 1px 3px rgb(0 0 0 / 0.5))"}:{}}})(size,size_by);return react.createElement(Glyph,{series:{...nearestSeries,line_width:3},top:0,left:0,size,fill:color,styleObj:style})}})})).withConfig({displayName:"XYTooltip",componentId:"sc-48579u-0"})(["",""],tooltipStyles),StyledDL=styled_components_browser_esm.ZP.dl.withConfig({displayName:"XYTooltip__StyledDL",componentId:"sc-48579u-1"})(["margin:0;"]);try{XYTooltip.displayName="XYTooltip",XYTooltip.__docgenInfo={description:"XYTooltip component for charts that leverage visx's XYChart component like Line\nand Area with 2 main purposes:\n1. Override default styling on visx Tooltip component\n2. Construct a renderTooltip function to be passed to nested visx Tooltip component",displayName:"XYTooltip",props:{config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CCartesian"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ChartData"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},snapToDatum:{defaultValue:null,description:"",name:"snapToDatum",required:!1,type:{name:"boolean"}},showDatumGlyph:{defaultValue:null,description:"",name:"showDatumGlyph",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/XYTooltip/XYTooltip.tsx#XYTooltip"]={docgenInfo:XYTooltip.__docgenInfo,name:"XYTooltip",path:"../visualizations-visx/src/XYTooltip/XYTooltip.tsx#XYTooltip"})}catch(__react_docgen_typescript_loader_error){}var Marker=__webpack_require__("../../node_modules/@visx/marker/esm/markers/Marker.js");const Marker_Marker=({series,id})=>{const theme=(0,styled_components_browser_esm.Fg)(),{line_width=1}=series,fill=((series,lookerTheme)=>"outline"===series.style?lookerTheme.colors.background:series.color?series.color:lookerTheme.colors.key)(series,theme),size=getDefaultGlyphSize(line_width),top=size/2,left=size/2;return react.createElement(Marker.Z,{id:`${id}`,fill,markerWidth:size,markerHeight:size,refX:left,refY:top},react.createElement(Glyph,{series,top,left,size,fill}))};try{Marker_Marker.displayName="Marker",Marker_Marker.__docgenInfo={description:"",displayName:"Marker",props:{series:{defaultValue:null,description:"",name:"series",required:!0,type:{name:"Partial<CSeriesBasic & CSeriesPoints & CSeriesLine>"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Marker/Marker.tsx#Marker"]={docgenInfo:Marker_Marker.__docgenInfo,name:"Marker",path:"../visualizations-visx/src/Marker/Marker.tsx#Marker"})}catch(__react_docgen_typescript_loader_error){}var Grid=__webpack_require__("../../node_modules/@visx/xychart/esm/components/grid/Grid.js"),every=__webpack_require__("../../node_modules/lodash/every.js"),every_default=__webpack_require__.n(every);const Grid_Grid=({config})=>{const x_axis=config?.x_axis||[],y_axis=config?.y_axis||[],showGridX=every_default()(x_axis,["gridlines",!0]),showGridY=every_default()(y_axis,["gridlines",!0]);return react.createElement(Grid.Z,{rows:showGridY,columns:showGridX})};try{Grid_Grid.displayName="Grid",Grid_Grid.__docgenInfo={description:"",displayName:"Grid",props:{config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CCartesian"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Grid/Grid.tsx#Grid"]={docgenInfo:Grid_Grid.__docgenInfo,name:"Grid",path:"../visualizations-visx/src/Grid/Grid.tsx#Grid"})}catch(__react_docgen_typescript_loader_error){}const NoopComponent=({children})=>react.createElement(react.Fragment,null,children),Area=({data,config,height=constants.R$,width,fields})=>{const{positioning,series:seriesList,legend}=config,formattedData=concatDimensions(data,fields),{XAxis,YAxis,chartMargin}=useAxis({config,data:formattedData,fields}),chartTheme=useChartTheme(seriesList);if(!isValidChartData(data,fields))return null;const areas=fields.measures.map(((measure,i)=>{const series=isArray_default()(seriesList)?get_default()(config,["series",i]):get_default()(config,["series",measure.name]);if(!series.visible)return react.createElement(react.Fragment,{key:i});const{style,line_width,shape}=series,id=`marker-${shape}-${i}`;return react.createElement(react.Fragment,{key:id},"none"!==style&&react.createElement(Marker_Marker,{series,id}),react.createElement(AreaSeries.Z,{key:id,dataKey:measure.name,data:dimensionToDate(formattedData,fields),lineProps:{strokeWidth:line_width,markerMid:`url(#${id})`,markerStart:`url(#${id})`,markerEnd:`url(#${id})`},fillOpacity:.4,xAccessor:d=>getX(d),yAccessor:d=>getY(d,i)}))})),domain="percent"===positioning?[0,1]:getYAxisRange({config,data:formattedData,fields}),Y_SCALE={type:"linear",...domain&&{domain,zero:!1}},PositioningWrapper="stacked"===positioning||"percent"===positioning?AreaStack.Z:NoopComponent;return react.createElement(DataProvider.Z,{xScale:{type:isDateQuery(fields)?"time":"band"},yScale:Y_SCALE,theme:chartTheme},react.createElement(VisWrapper.T,{legend},react.createElement(XYChart.Z,{margin:chartMargin,width,height},react.createElement(XAxis,null),react.createElement(YAxis,null),react.createElement(Grid_Grid,{config}),react.createElement(XYTooltip,{config,data:formattedData,fields}),react.createElement(PositioningWrapper,{offset:"percent"===positioning?"expand":"none"},areas)),react.createElement(XYLegend,{chartWidth:width,config,fields})))};try{Area.displayName="Area",Area.__docgenInfo={description:"",displayName:"Area",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CArea"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Area/Area.tsx#Area"]={docgenInfo:Area.__docgenInfo,name:"Area",path:"../visualizations-visx/src/Area/Area.tsx#Area"})}catch(__react_docgen_typescript_loader_error){}var BarSeries=__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/BarSeries.js"),BarStack=__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/BarStack.js"),BarGroup=__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/BarGroup.js");const Bar=({data,config,height=constants.R$,width,fields})=>{const{positioning,series:seriesList,legend}=config,formattedData=concatDimensions(data,fields),chartTheme=useChartTheme(seriesList),visxTheme=(0,react.useContext)(ThemeContext.Z),yAxisLabels=formattedData.map((datum=>formatDateLabel({dateString:datum.dimension,fields}))),yAxisLongestLabel=pickLongestLabel(yAxisLabels),{width:yAxisLongestLabelWidth}=useMeasuredText(yAxisLongestLabel,{fontFamily:visxTheme.axisStyles.x.bottom.tickLabel.fontFamily||"Roboto",fontSize:visxTheme.axisStyles.x.bottom.tickLabel.fontSize||"1rem"}),yAxisConfig=config?.x_axis?.[0],yAxisValueFormat=getXAxisFormat(fields),yAxisLabelDx=yAxisConfig?.values?-yAxisLongestLabelWidth-10:-10,xAxisConfig=config?.y_axis?.[0],xAxisValueFormat=getYAxisFormat(config),measureNames=getVisibleMeasureNames(fields,config),measureValues=data.flatMap((d=>Object.values(pick_default()(d,measureNames)).map((value=>numeral_default()(value).format(xAxisValueFormat))))),xAxisLongestLabel=pickLongestLabel(measureValues),{height:xAxisLongestLabelHeight,width:xAxisLongestLabelWidth}=useMeasuredText(xAxisLongestLabel,{fontFamily:visxTheme.axisStyles.x.bottom.tickLabel.fontFamily||"Roboto",fontSize:visxTheme.axisStyles.x.bottom.tickLabel.fontSize||"1rem"}),averageMeasureValueLength=measureValues.join("").length/measureValues.length,hasRotatedXAxisLabels=xAxisConfig?.values&&averageMeasureValueLength>10,angledLabelHypotenuse=Math.sqrt(xAxisLongestLabelWidth*xAxisLongestLabelWidth/2),X_AXIS_STYLE=hasRotatedXAxisLabels?{labelDy:angledLabelHypotenuse,tickAngle:-45,tickSpace:2*xAxisLongestLabelHeight,tickTextAnchor:"end"}:{labelDy:0,tickAngle:0,tickSpace:xAxisLongestLabelWidth+constants.jK,tickTextAnchor:"inherit"};if(!isValidChartData(data,fields))return null;const domain="percent"===positioning?[0,1]:getYAxisRange({config,data:formattedData,fields}),X_SCALE={type:"linear",...domain&&{domain,zero:!1}},chartMargin={right:0,top:0,bottom:hasRotatedXAxisLabels?angledLabelHypotenuse+constants.jK:constants.jK,left:yAxisConfig?.values?yAxisLongestLabelWidth+constants.jK:constants.jK},renderedBars=compact_default()(fields.measures.map(((measure,i)=>{if((isArray_default()(seriesList)?get_default()(config,["series",i]):get_default()(config,["series",measure.name])).visible)return react.createElement(BarSeries.Z,{key:i,dataKey:measure.name,data:formattedData,xAccessor:d=>getY(d,i),yAccessor:d=>getX(d)})})));return react.createElement(DataProvider.Z,{xScale:X_SCALE,yScale:{type:"band",paddingInner:.2},theme:chartTheme},react.createElement(VisWrapper.T,{legend},react.createElement(XYChart.Z,{margin:chartMargin,width,height},react.createElement(XAxis,(0,esm_extends.Z)({showTicks:xAxisConfig?.values,fields,label:xAxisConfig?.label||"",valueFormat:xAxisValueFormat},X_AXIS_STYLE)),react.createElement(YAxis,{showTicks:yAxisConfig?.values,fields,label:yAxisConfig?.label||"",labelDx:yAxisLabelDx,valueFormat:yAxisValueFormat}),react.createElement(Grid_Grid,{config}),react.createElement(XYTooltip,{config,data:formattedData,fields,showDatumGlyph:!1,snapToDatum:!1}),"stacked"===positioning||"percent"===positioning?react.createElement(BarStack.Z,{offset:"percent"===positioning?"expand":"none"},renderedBars):react.createElement(BarGroup.Z,null,renderedBars)),react.createElement(XYLegend,{chartWidth:width,config,fields})))};try{Bar.displayName="Bar",Bar.__docgenInfo={description:"",displayName:"Bar",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CBar"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Bar/Bar.tsx#Bar"]={docgenInfo:Bar.__docgenInfo,name:"Bar",path:"../visualizations-visx/src/Bar/Bar.tsx#Bar"})}catch(__react_docgen_typescript_loader_error){}const Column=({data,config,height=constants.R$,width,fields})=>{const{positioning,series:seriesList,legend}=config,formattedData=concatDimensions(data,fields),{XAxis,YAxis,chartMargin}=useAxis({config,data:formattedData,fields}),chartTheme=useChartTheme(seriesList);if(!isValidChartData(data,fields))return null;const renderedColumns=compact_default()(fields.measures.map(((measure,i)=>{if((isArray_default()(seriesList)?get_default()(config,["series",i]):get_default()(config,["series",measure.name])).visible)return react.createElement(BarSeries.Z,{key:i,dataKey:measure.name,data:formattedData,xAccessor:d=>getX(d),yAccessor:d=>getY(d,i)})}))),domain="percent"===positioning?[0,1]:getYAxisRange({config,data:formattedData,fields}),Y_SCALE={type:"linear",...domain&&{domain,zero:!1}};return react.createElement(DataProvider.Z,{xScale:{type:"band",paddingInner:.2},yScale:Y_SCALE,theme:chartTheme},react.createElement(VisWrapper.T,{legend},react.createElement(XYChart.Z,{margin:chartMargin,width,height},react.createElement(XAxis,null),react.createElement(YAxis,null),react.createElement(Grid_Grid,{config}),react.createElement(XYTooltip,{config,data:formattedData,fields,showDatumGlyph:!1,snapToDatum:!1}),"stacked"===positioning||"percent"===positioning?react.createElement(BarStack.Z,{offset:"percent"===positioning?"expand":"none"},renderedColumns):react.createElement(BarGroup.Z,null,renderedColumns)),react.createElement(XYLegend,{chartWidth:width,config,fields})))};try{Column.displayName="Column",Column.__docgenInfo={description:"",displayName:"Column",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CColumn"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Column/Column.tsx#Column"]={docgenInfo:Column.__docgenInfo,name:"Column",path:"../visualizations-visx/src/Column/Column.tsx#Column"})}catch(__react_docgen_typescript_loader_error){}var LineSeries=__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/LineSeries.js"),getSeriesColor=__webpack_require__("../visualizations-visx/src/utils/getSeriesColor.ts");const Line=({data,config,height=constants.R$,width,fields})=>{const theme=(0,styled_components_browser_esm.Fg)(),formattedData=concatDimensions(data,fields),{XAxis,YAxis,chartMargin}=useAxis({config,data:formattedData,fields}),chartTheme=useChartTheme(config.series);if(!isValidChartData(data,fields))return null;const lines=fields.measures.map(((measure,i)=>{const series=isArray_default()(config.series)?get_default()(config,["series",i]):get_default()(config,["series",measure.name]);if(!series?.visible)return react.createElement(react.Fragment,{key:i});const{style,line_width,shape}=series,id=`marker-${shape}-${i}`;return react.createElement(react.Fragment,{key:id},"none"!==style&&react.createElement(Marker_Marker,{series,id}),react.createElement(LineSeries.Z,{key:id,dataKey:measure.name,data:dimensionToDate(formattedData,fields),stroke:(0,getSeriesColor._)(series,theme),strokeWidth:line_width,xAccessor:d=>getX(d),yAccessor:d=>getY(d,i),markerMid:`url(#${id})`,markerStart:`url(#${id})`,markerEnd:`url(#${id})`}))})),domain=getYAxisRange({config,data:formattedData,fields}),Y_SCALE={type:"linear",...domain&&{domain,zero:!1}};return react.createElement(DataProvider.Z,{xScale:{type:isDateQuery(fields)?"time":"band"},yScale:Y_SCALE,theme:chartTheme},react.createElement(VisWrapper.T,{legend:config.legend},react.createElement(XYChart.Z,{margin:chartMargin,width,height},react.createElement(XAxis,null),react.createElement(YAxis,null),react.createElement(Grid_Grid,{config}),react.createElement(XYTooltip,{config,data:formattedData,fields}),lines),react.createElement(XYLegend,{chartWidth:width,config,fields})))};try{Line.displayName="Line",Line.__docgenInfo={description:"",displayName:"Line",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CLine"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Line/Line.tsx#Line"]={docgenInfo:Line.__docgenInfo,name:"Line",path:"../visualizations-visx/src/Line/Line.tsx#Line"})}catch(__react_docgen_typescript_loader_error){}var Pie=__webpack_require__("../../node_modules/@visx/shape/lib/shapes/Pie.js"),ordinal=__webpack_require__("../../node_modules/@visx/scale/esm/scales/ordinal.js"),Group=__webpack_require__("../../node_modules/@visx/group/esm/Group.js"),useTooltip=__webpack_require__("../../node_modules/@visx/tooltip/esm/hooks/useTooltip.js");const getLabelContent=(measureTotal,data,legendConfig)=>{const{value="label_percent"}=legendConfig||{},[key,val]=Object.entries(data)[0],percent=numeral_default()(val/measureTotal).format("0.00%");return{label:key,value:String(val),percent,label_value:`${key}  ${val}`,label_percent:`${key}  ${percent}`}[value]};var pointRadial=__webpack_require__("../../node_modules/d3-shape/src/pointRadial.js");const getConnectorLength=(angle,outerRadius)=>{const[_,connectorY]=(0,pointRadial.Z)(angle,outerRadius),yPosPercent=Math.abs(connectorY/outerRadius);return Math.pow(1.15,Math.exp(3.37*yPosPercent))+10};var TooltipWithBounds=__webpack_require__("../../node_modules/@visx/tooltip/esm/tooltips/TooltipWithBounds.js");const PieTooltip=(0,styled_components_browser_esm.ZP)((({tooltipOpen,tooltipData,tooltipTop,tooltipLeft,measure,dimension,className})=>tooltipOpen&&tooltipData?react.createElement(TooltipWithBounds.Z,{className,top:tooltipTop,left:tooltipLeft,unstyled:!0,applyPositionStyle:!0},react.createElement("dl",null,react.createElement(SpaceVertical.s,{gap:"u3"},react.createElement(DLGroup,{value:tooltipData[dimension.name]}),react.createElement(DLGroup,{label:measure.label||measure.label_short,value:tooltipData[measure.name]})))):null)).withConfig({displayName:"PieTooltip",componentId:"sc-1vkcacc-0"})(["",""],tooltipStyles);try{PieTooltip.displayName="PieTooltip",PieTooltip.__docgenInfo={description:"",displayName:"PieTooltip",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},dimension:{defaultValue:null,description:"",name:"dimension",required:!0,type:{name:"DimensionMetadata"}},measure:{defaultValue:null,description:"",name:"measure",required:!0,type:{name:"FieldMetadata"}},tooltipOpen:{defaultValue:null,description:"",name:"tooltipOpen",required:!0,type:{name:"boolean"}},tooltipData:{defaultValue:null,description:"",name:"tooltipData",required:!1,type:{name:"SDKRecord"}},tooltipTop:{defaultValue:null,description:"",name:"tooltipTop",required:!1,type:{name:"number"}},tooltipLeft:{defaultValue:null,description:"",name:"tooltipLeft",required:!1,type:{name:"number"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Pie/PieTooltip.tsx#PieTooltip"]={docgenInfo:PieTooltip.__docgenInfo,name:"PieTooltip",path:"../visualizations-visx/src/Pie/PieTooltip.tsx#PieTooltip"})}catch(__react_docgen_typescript_loader_error){}var d3_hsv=__webpack_require__("../../node_modules/d3-hsv/index.js"),localPoint=__webpack_require__("../../node_modules/@visx/event/esm/localPoint.js");const PieArc=({arc,path,datumColor,onMouseOver,onMouseOut,renderTooltip})=>{const[isHovered,setIsHovered]=(0,react.useState)(!1),theme=(0,styled_components_browser_esm.Fg)(),{h,s,v}=(0,d3_hsv.mC)(datumColor),hoverColor=(0,d3_hsv.mC)(h,s,Math.min(v+.2,1)).hex();return react.createElement("g",null,react.createElement("path",{d:path({...arc})||void 0,fill:isHovered?datumColor:"transparent",transform:"scale(1.03)",opacity:"0.4"}),react.createElement("path",{d:path({...arc})||void 0,fill:isHovered?hoverColor:datumColor,onMouseMove:e=>{const coords=(0,localPoint.Z)(e.target.ownerSVGElement,e);onMouseOver(arc,coords),renderTooltip&&setIsHovered(!0)},onMouseLeave:()=>{onMouseOut(),setIsHovered(!1)},stroke:theme.colors.background,strokeWidth:1}))};try{PieArc.displayName="PieArc",PieArc.__docgenInfo={description:"",displayName:"PieArc",props:{arc:{defaultValue:null,description:"",name:"arc",required:!0,type:{name:"PieArcDatum<SDKRecord>"}},path:{defaultValue:null,description:"",name:"path",required:!0,type:{name:"Arc<any, PieArcDatum<SDKRecord>>"}},onMouseOut:{defaultValue:null,description:"",name:"onMouseOut",required:!0,type:{name:"() => void"}},onMouseOver:{defaultValue:null,description:"",name:"onMouseOver",required:!0,type:{name:"(arc: PieArcDatum<SDKRecord>, point: Point | null) => void"}},renderTooltip:{defaultValue:null,description:"",name:"renderTooltip",required:!0,type:{name:"boolean"}},datumColor:{defaultValue:null,description:"",name:"datumColor",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Pie/PieArc.tsx#PieArc"]={docgenInfo:PieArc.__docgenInfo,name:"PieArc",path:"../visualizations-visx/src/Pie/PieArc.tsx#PieArc"})}catch(__react_docgen_typescript_loader_error){}var Annotation=__webpack_require__("../../node_modules/@visx/annotation/esm/components/Annotation.js"),Connector=__webpack_require__("../../node_modules/@visx/annotation/esm/components/Connector.js"),Label=__webpack_require__("../../node_modules/@visx/annotation/esm/components/Label.js");const PieLabel=({arc,outerRadius,labelContent,datumColor})=>{const theme=(0,styled_components_browser_esm.Fg)(),{startAngle,endAngle}=arc,averageAngle=(startAngle+endAngle)/2,[connectorX,connectorY]=(0,pointRadial.Z)(averageAngle,outerRadius),connectorLength=getConnectorLength(averageAngle,outerRadius),[labelX,labelY]=(0,pointRadial.Z)(averageAngle,connectorLength),ANCHOR_POSITION=connectorX>0?"start":"end";return react.createElement(Annotation.Z,{x:connectorX,y:connectorY,dx:labelX,dy:labelY},react.createElement(Connector.Z,{stroke:datumColor,pathProps:{strokeWidth:2},type:"line"}),react.createElement(Label.Z,{titleFontSize:theme.fontSizes.xsmall,backgroundFill:"transparent",backgroundPadding:{top:5,right:5,bottom:5,left:5},showAnchorLine:!1,horizontalAnchor:ANCHOR_POSITION,verticalAnchor:"middle",title:labelContent}))};try{PieLabel.displayName="PieLabel",PieLabel.__docgenInfo={description:"",displayName:"PieLabel",props:{arc:{defaultValue:null,description:"",name:"arc",required:!0,type:{name:"PieArcDatum<SDKRecord>"}},outerRadius:{defaultValue:null,description:"",name:"outerRadius",required:!0,type:{name:"number"}},labelContent:{defaultValue:null,description:"",name:"labelContent",required:!0,type:{name:"string"}},datumColor:{defaultValue:null,description:"",name:"datumColor",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Pie/PieLabel.tsx#PieLabel"]={docgenInfo:PieLabel.__docgenInfo,name:"PieLabel",path:"../visualizations-visx/src/Pie/PieLabel.tsx#PieLabel"})}catch(__react_docgen_typescript_loader_error){}var useCallbackRef=__webpack_require__("../components/src/utils/useCallbackRef.ts"),useMeasuredElement=__webpack_require__("../components/src/utils/useMeasuredElement.ts"),KeyboardArrowUp_esm=__webpack_require__("../../node_modules/@styled-icons/material/KeyboardArrowUp/KeyboardArrowUp.esm.js"),KeyboardArrowDown_esm=__webpack_require__("../../node_modules/@styled-icons/material/KeyboardArrowDown/KeyboardArrowDown.esm.js"),KeyboardArrowRight_esm=__webpack_require__("../../node_modules/@styled-icons/material/KeyboardArrowRight/KeyboardArrowRight.esm.js"),KeyboardArrowLeft_esm=__webpack_require__("../../node_modules/@styled-icons/material/KeyboardArrowLeft/KeyboardArrowLeft.esm.js"),IconButton=__webpack_require__("../components/src/Button/IconButton.tsx");const PieLegendControls=({orientation,contentRect,containerRect,page,totalPages,handleNextClick,handlePrevClick})=>{const{t}=useTranslation("PieLegendControls");return react.createElement(react.Fragment,null,contentRect.height>containerRect.height&&"vertical"===orientation&&react.createElement(LegendControls,{orientation},react.createElement(CondensedIconButton,{shape:"square",p:"small",icon:react.createElement(KeyboardArrowUp_esm.Q,null),onClick:handlePrevClick,disabled:0===page,size:"large",label:t("Previous page")}),react.createElement("span",null,page+1,"/",totalPages+1),react.createElement(CondensedIconButton,{shape:"square",icon:react.createElement(KeyboardArrowDown_esm.W,null),onClick:handleNextClick,disabled:page===totalPages,p:"small",size:"large",label:t("Next page")})),contentRect.width>containerRect.width&&"horizontal"===orientation&&react.createElement(LegendControls,{orientation},react.createElement(CondensedIconButton,{shape:"square",p:"small",icon:react.createElement(KeyboardArrowRight_esm.w,null),onClick:handleNextClick,disabled:page===totalPages,size:"large",label:t("Next page")}),react.createElement("span",null,page+1,"/",totalPages+1),react.createElement(CondensedIconButton,{shape:"square",icon:react.createElement(KeyboardArrowLeft_esm.R,null),onClick:handlePrevClick,disabled:0===page,p:"small",size:"large",label:t("Previous page")})))},LegendControls=styled_components_browser_esm.ZP.div.withConfig({displayName:"PieLegendControls__LegendControls",componentId:"sc-x61jcd-0"})(["align-items:center;display:grid;grid-gap:",";justify-items:center;",""],(({theme})=>theme.space.xxsmall),(({orientation,theme})=>"horizontal"===orientation?(0,styled_components_browser_esm.iv)(["border-left:1px solid ",";grid-template-rows:auto auto auto;padding-left:",";"],theme.colors.ui2,theme.space.xxsmall):(0,styled_components_browser_esm.iv)(["border-top:1px solid ",";grid-template-columns:auto auto auto 1fr;padding-top:",";"],theme.colors.ui2,theme.space.xxsmall))),CondensedIconButton=(0,styled_components_browser_esm.ZP)(IconButton.h).withConfig({displayName:"PieLegendControls__CondensedIconButton",componentId:"sc-x61jcd-1"})(["height:auto;padding:0;"]);try{PieLegendControls.displayName="PieLegendControls",PieLegendControls.__docgenInfo={description:"",displayName:"PieLegendControls",props:{contentRect:{defaultValue:null,description:"",name:"contentRect",required:!0,type:{name:"{ width: number; height: number; }"}},containerRect:{defaultValue:null,description:"",name:"containerRect",required:!0,type:{name:"{ width: number; height: number; }"}},orientation:{defaultValue:null,description:"",name:"orientation",required:!0,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},totalPages:{defaultValue:null,description:"",name:"totalPages",required:!0,type:{name:"number"}},handleNextClick:{defaultValue:null,description:"",name:"handleNextClick",required:!0,type:{name:"() => void"}},handlePrevClick:{defaultValue:null,description:"",name:"handlePrevClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Pie/PieLegendControls.tsx#PieLegendControls"]={docgenInfo:PieLegendControls.__docgenInfo,name:"PieLegendControls",path:"../visualizations-visx/src/Pie/PieLegendControls.tsx#PieLegendControls"})}catch(__react_docgen_typescript_loader_error){}const getLegendStyle=(scale,orientation,theme)=>{const rows=scale.domain().length>3?3:1;return"horizontal"===orientation?{display:"grid",gridTemplateRows:`repeat(${rows}, auto )`,gridColumnGap:theme.space.small,gridAutoFlow:"column"}:{}},PieLegend=({legendConfig,scale,data,measureTotal,height,width})=>{const{t}=useTranslation("PieLegend"),[page,setPage]=(0,react.useState)(0),theme=(0,styled_components_browser_esm.Fg)(),{position}=legendConfig||{},ORIENTATION="top"===position||"bottom"===position?"horizontal":"vertical",[contentElement,contentRef]=(0,useCallbackRef.W)(null),[{height:contentHeight,width:contentWidth}]=(0,useMeasuredElement.h)(contentElement),[containerElement,containerRef]=(0,useCallbackRef.W)(null),[containerElementRect]=(0,useMeasuredElement.h)(containerElement),containerHeight="function"==typeof DOMRect?containerElementRect.height:height,containerWidth="function"==typeof DOMRect?containerElementRect.width:width,pageSize="horizontal"===ORIENTATION?.9*containerWidth:.9*containerHeight,totalPages="horizontal"===ORIENTATION?Math.floor(contentWidth/Math.max(pageSize,1)):Math.floor(contentHeight/Math.max(pageSize,1)),handleNextPage=()=>{setPage(Math.min(page+1,totalPages))},handlePrevPage=()=>{setPage(Math.max(page-1,0))};return react.createElement(LegendWrapper,{maxHeight:height,maxWidth:width,orientation:ORIENTATION},react.createElement(LegendContent,{ref:containerRef,tabIndex:0,onKeyDown:e=>{"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(handleNextPage(),e.preventDefault()),"ArrowUp"!==e.key&&"ArrowLeft"!==e.key||(handlePrevPage(),e.preventDefault())},role:"figure","aria-label":t("Legend page {{page}} of {{totalPages}}",{page:page+1,totalPages:totalPages+1})},react.createElement(ContentPositioner,{pageNumber:page,pageSize,orientation:ORIENTATION,ref:contentRef},react.createElement(Ordinal.Z,{labelFormat:label=>{const datum=pick_default()(data,label);return getLabelContent(measureTotal,datum,legendConfig)},scale,shape:"circle",style:getLegendStyle(scale,ORIENTATION,theme)}))),react.createElement(PieLegendControls,{containerRect:{width:containerWidth,height:containerHeight},contentRect:{width:contentWidth,height:contentHeight},orientation:ORIENTATION,page,totalPages,handleNextClick:handleNextPage,handlePrevClick:handlePrevPage}))},LegendWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"PieLegend__LegendWrapper",componentId:"sc-1dt2jge-0"})(["border:1px solid transparent;display:grid;max-height:","px;max-width:","px;overflow:hidden;position:relative;"," width:fit-content;&:focus{border-color:",";}"],(({maxHeight})=>maxHeight),(({maxWidth})=>maxWidth),(({orientation,theme})=>"horizontal"===orientation?(0,styled_components_browser_esm.iv)(["align-items:center;grid-template-columns:1fr auto;"]):(0,styled_components_browser_esm.iv)(["grid-template-rows:1fr auto;padding:"," 0;"],theme.space.medium)),(({theme})=>theme.colors.key)),LegendContent=styled_components_browser_esm.ZP.figure.withConfig({displayName:"PieLegend__LegendContent",componentId:"sc-1dt2jge-1"})(["margin:0;overflow:hidden;padding:0;position:relative;.visx-legend-label{width:max-content;}"]),ContentPositioner=styled_components_browser_esm.ZP.div.withConfig({displayName:"PieLegend__ContentPositioner",componentId:"sc-1dt2jge-2"})(["overflow:visible;transition:transform 300ms;width:max-content;",""],(({orientation,pageNumber,pageSize})=>"horizontal"===orientation?(0,styled_components_browser_esm.iv)(["transform:translateX(","px);"],pageNumber*pageSize*-1):(0,styled_components_browser_esm.iv)(["transform:translateY(","px);"],pageNumber*pageSize*-1)));try{PieLegend.displayName="PieLegend",PieLegend.__docgenInfo={description:"",displayName:"PieLegend",props:{legendConfig:{defaultValue:null,description:"",name:"legendConfig",required:!0,type:{name:"false | CPieLegend | undefined"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"ScaleOrdinal<string, string, never>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, number>"}},measureTotal:{defaultValue:null,description:"",name:"measureTotal",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Pie/PieLegend.tsx#PieLegend"]={docgenInfo:PieLegend.__docgenInfo,name:"PieLegend",path:"../visualizations-visx/src/Pie/PieLegend.tsx#PieLegend"})}catch(__react_docgen_typescript_loader_error){}const Pie_Pie=({data,config,height=constants.R$,width=constants.R$,fields})=>{const{showTooltip,hideTooltip,...tooltipProps}=(0,useTooltip.Z)(),{series,legend,tooltips=!0}=config,{position:legendPosition="right",type:legendType,width:legendWidth}=legend||{},limitedData=data.slice(0,50),firstMeasure=fields.measures[0]||{},firstDimension=fields.dimensions[0]||{},keyValData=Object.fromEntries(limitedData.map((d=>[d[firstDimension.name],Number(d[firstMeasure.name])]))),measureTotal=Number(Object.values(keyValData).reduce(((total,v)=>Number(total)+Number(v)),0)),labelWidth=((measureTotal,keyValData,legend)=>{const{type:legendType="legend"}=legend||{},theme=(0,styled_components_browser_esm.Fg)(),longestLabel=pickLongestLabel(Object.entries(keyValData).map((([key,val])=>getLabelContent(measureTotal,{[key]:val},legend)))),{width:labelWidth}=useMeasuredText(longestLabel,{fontSize:"legend"===legendType?theme.fontSizes.medium:theme.fontSizes.xsmall,fontFamily:theme.fonts.body});return Math.max(labelWidth+20,90)})(measureTotal,keyValData,legend),{canvasW,canvasH,pieCenterX,pieCenterY,outerRadius}=(({width,height,labelWidth,legendType="legend"})=>{const minChartSize="legend"===legendType?50:350,maxConnectorLength=2*getConnectorLength(0,1),maxDimension=Math.max(width,height,minChartSize),hoverMargin=Math.ceil(maxDimension-maxDimension/1.03),canvasCenter=(maxDimension-hoverMargin)/2,padding="labels"===legendType?Math.max(labelWidth,maxConnectorLength):0;return{canvasW:maxDimension,canvasH:maxDimension-padding,pieCenterX:canvasCenter,pieCenterY:canvasCenter-padding/2,outerRadius:canvasCenter-hoverMargin-padding}})({legendType:legend?legend.type:void 0,width,height,labelWidth}),colorScale=((data,seriesConfig,dimension)=>{const dataKey=dimension.name,range=isArray_default()(seriesConfig)?seriesConfig.map((s=>s?.color)):data.map((d=>seriesConfig[d[dataKey]]?.color));return(0,ordinal.Z)({domain:data.map((d=>d[dataKey])),range})})(limitedData,series,firstDimension);let mouseOutTimer=0;const handleMouseOver=({data:pieDatum},coords)=>{window.clearTimeout(mouseOutTimer),coords&&tooltips&&showTooltip({tooltipData:pieDatum,tooltipTop:coords.y,tooltipLeft:coords.x})},handleMouseOut=()=>{mouseOutTimer=window.setTimeout((()=>{hideTooltip()}))};return react.createElement(react.Fragment,null,react.createElement(PieGrid,{legendType:legend?legend.type:void 0},react.createElement(PieChart,{legendPosition,width:canvasW,height:canvasH},react.createElement(Group.Z,{top:pieCenterY,left:pieCenterX},react.createElement(Pie.Z,{data:limitedData,pieValue:d=>d[firstMeasure.name],pieSortValues:()=>1,outerRadius},(({arcs,path})=>arcs.map(((arc,i)=>{const dimensonValue=arc.data[firstDimension.name],arcDatum=pick_default()(keyValData,dimensonValue),datumColor=colorScale(dimensonValue)||"#000000";return react.createElement(react.Fragment,{key:i},react.createElement(PieArc,{arc,path,key:i,datumColor,onMouseOver:handleMouseOver,onMouseOut:handleMouseOut,renderTooltip:tooltips}),"labels"===legendType&&react.createElement(PieLabel,{arc,outerRadius,labelContent:getLabelContent(measureTotal,arcDatum,legend),datumColor}))})))))),legend&&"legend"===legendType&&react.createElement(Pie_LegendWrapper,{legendPosition},react.createElement(PieLegend,{legendConfig:legend,scale:colorScale,data:keyValData,measureTotal,height:canvasH,width:legendWidth||canvasW}))),react.createElement(PieTooltip,(0,esm_extends.Z)({},tooltipProps,{measure:firstMeasure,dimension:firstDimension})))},PieGrid=styled_components_browser_esm.ZP.div.withConfig({displayName:"Pie__PieGrid",componentId:"sc-98dgxh-0"})(["align-items:center;display:grid;grid-column-gap:",";grid-template-areas:'top top' 'left right' 'bottom bottom';grid-template-columns:fit-content(250px) 1fr;"],(({theme,legendType})=>"legend"===legendType?theme.space.medium:0)),PieChart=styled_components_browser_esm.ZP.svg.withConfig({displayName:"Pie__PieChart",componentId:"sc-98dgxh-1"})(["",""],(({legendPosition})=>(0,styled_components_browser_esm.iv)(["grid-area:",";"],"left"===legendPosition?"right":"left"))),Pie_LegendWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"Pie__LegendWrapper",componentId:"sc-98dgxh-2"})(["",""],(({legendPosition})=>(0,styled_components_browser_esm.iv)(["grid-area:",";"],legendPosition)));try{Pie_Pie.displayName="Pie",Pie_Pie.__docgenInfo={description:"",displayName:"Pie",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:{value:"500"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CPie"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Pie/Pie.tsx#Pie"]={docgenInfo:Pie_Pie.__docgenInfo,name:"Pie",path:"../visualizations-visx/src/Pie/Pie.tsx#Pie"})}catch(__react_docgen_typescript_loader_error){}var GlyphSeries=__webpack_require__("../../node_modules/@visx/xychart/esm/components/series/GlyphSeries.js"),chunk=__webpack_require__("../../node_modules/lodash/chunk.js"),chunk_default=__webpack_require__.n(chunk);const hexToRgba=(hex,opacity)=>{if(opacity<0||opacity>1)throw new Error(`Invalid opacity value: ${opacity}. Please provide a decimal number between 0 and 1.`);if("#"===hex[0]&&(4===hex.length||7===hex.length))return hexToRgba(hex.slice(1),opacity);if(3===hex.length||6===hex.length){const chunkLength=3===hex.length?1:2,[r,g,b]=chunk_default()(hex,chunkLength).map((chunk=>`0x${1===chunkLength?chunk[0]+chunk[0]:chunk.join("")}`));return`rgba(${+r}, ${+g}, ${+b}, ${String(opacity)})`}throw new Error(`Invalid hexadecimal color code: ${hex}`)},Scatter=({data,config,height=constants.R$,width,fields})=>{const formattedData=concatDimensions(data,fields),{XAxis,YAxis,chartMargin}=useAxis({config,data:formattedData,fields}),chartTheme=useChartTheme(config.series);if(!isValidChartData(data,fields))return null;const plots=fields.measures.map(((measure,i)=>{const series=isArray_default()(config.series)?get_default()(config,["series",i]):get_default()(config,["series",measure.name]);if(!series.visible)return react.createElement(react.Fragment,{key:i});const{style,shape,size_by,line_width=1}=series,id=`marker-${shape}-${i}`,sizeByMax=size_by?(0,getSeriesMax.q)(size_by,data):0,sizeByMin=size_by?(0,getSeriesMin._)(size_by,data):0;return react.createElement(react.Fragment,{key:id},react.createElement(GlyphSeries.Z,{key:id,dataKey:measure.name,data:dimensionToDate(formattedData,fields),xAccessor:d=>getX(d),yAccessor:d=>getY(d,i),size:sizeProps=>size_by&&sizeByMax-sizeByMin>0?getRelativeGlyphSize(sizeProps[size_by],sizeByMin,sizeByMax):getDefaultGlyphSize(line_width),renderGlyph:({size,color,x,y})=>react.createElement(Glyph,{series,top:y,left:x,size,fill:hexToRgba(color,.6),stroke:"filled"!==style&&void 0})}))})),domain=getYAxisRange({config,data:formattedData,fields}),Y_SCALE={type:"linear",...domain&&{domain,zero:!1}};return react.createElement(DataProvider.Z,{xScale:{type:isDateQuery(fields)?"time":"band"},yScale:Y_SCALE,theme:chartTheme},react.createElement(VisWrapper.T,{legend:config.legend},react.createElement(XYChart.Z,{margin:chartMargin,width,height},react.createElement(XAxis,null),react.createElement(YAxis,null),react.createElement(Grid_Grid,{config}),react.createElement(XYTooltip,{config,data:formattedData,fields}),plots),react.createElement(XYLegend,{chartWidth:width,config,fields})))};try{Scatter.displayName="Scatter",Scatter.__docgenInfo={description:"",displayName:"Scatter",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"500"},description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CScatter"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-visx/src/Scatter/Scatter.tsx#Scatter"]={docgenInfo:Scatter.__docgenInfo,name:"Scatter",path:"../visualizations-visx/src/Scatter/Scatter.tsx#Scatter"})}catch(__react_docgen_typescript_loader_error){}var Sparkline=__webpack_require__("../visualizations-visx/src/Sparkline/Sparkline.tsx");const SingleValue=({data,fields,width,height,config})=>{if(!data)return null;const{series={}}=config,{name}=fields.measures[0],firstSeries=Array.isArray(series)?series[0]:series[name||""],{color,label,value_format}=firstSeries,value=data[0][name||""],formattedValue=numeral_default()(value).format(value_format);return react.createElement(VisWrapper.T,null,react.createElement(SingleValueLayout,{width,height},react.createElement(SingleValueContent,{color},formattedValue),label&&react.createElement(SingleValueTitle,{color},label)))},SingleValueLayout=styled_components_browser_esm.ZP.div.withConfig({displayName:"SingleValue__SingleValueLayout",componentId:"sc-1qwcp7y-0"})(["align-items:center;background:",";display:grid;grid-template-columns:1fr;height:",";justify-items:center;width:",";"],(({theme})=>theme.colors.background),(({height})=>`${height}px`||"auto"),(({width})=>`${width}px`||"auto")),SingleValueContent=styled_components_browser_esm.ZP.div.withConfig({displayName:"SingleValue__SingleValueContent",componentId:"sc-1qwcp7y-1"})(["color:",";font-size:",";"],(({color})=>`${color}`),(({theme})=>theme.fontSizes.xxxlarge)),SingleValueTitle=styled_components_browser_esm.ZP.div.withConfig({displayName:"SingleValue__SingleValueTitle",componentId:"sc-1qwcp7y-2"})(["color:",";font-size:",";opacity:50%;"],(({color})=>`${color}`),(({theme})=>theme.fontSizes.large));try{SingleValue.displayName="SingleValue",SingleValue.__docgenInfo={description:"",displayName:"SingleValue",props:{legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SDKRecord[]"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"CSingleValue"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Fields"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations-single-value/src/SingleValue/SingleValue.tsx#SingleValue"]={docgenInfo:SingleValue.__docgenInfo,name:"SingleValue",path:"../visualizations-single-value/src/SingleValue/SingleValue.tsx#SingleValue"})}catch(__react_docgen_typescript_loader_error){}var ErrorBoundary=__webpack_require__("../visualizations-adapters/src/ErrorBoundary/ErrorBoundary.tsx"),has=__webpack_require__("../../node_modules/lodash/has.js"),has_default=__webpack_require__.n(has),QueryError=__webpack_require__("../visualizations/src/QueryError/QueryError.tsx"),utils_useTranslation=__webpack_require__("../visualizations/src/utils/useTranslation.ts");const defaultChartTypeMap={area:Area,bar:Bar,column:Column,default:Table.i,line:Line,pie:Pie_Pie,scatter:Scatter,single_value:SingleValue,sparkline:Sparkline.b,table:Table.i},VisualizationComponent=({height,width,data=[],fields,pivots,totals,config,chartTypeMap={}})=>{const{t}=(0,utils_useTranslation.$)("Visualization");if(fields?.measures.some((measure=>"date"===measure.type)))throw new Error(t("Measures of type 'date' are currently not supported"));const completeChartTypeMap=Object.assign({},defaultChartTypeMap,chartTypeMap);if(has_default()(completeChartTypeMap,config?.type||"")){const ChartComponent=completeChartTypeMap[config?.type];return react.createElement(ChartComponent,{data,config,fields,totals,pivots,width,height})}return react.createElement(QueryError.o,{message:t('No chart found for type "{{type}}"',{type:config?.type})})},Visualization=props=>(0,styled_components_browser_esm.Fg)()?react.createElement(ErrorBoundary.S,props,react.createElement(VisualizationComponent,props)):react.createElement(ComponentsProvider.t,null,react.createElement(Visualization,props));try{Visualization.displayName="Visualization",Visualization.__docgenInfo={description:"",displayName:"Visualization",props:{data:{defaultValue:{value:"[]"},description:"",name:"data",required:!1,type:{name:"SDKRecord[]"}},fields:{defaultValue:null,description:"",name:"fields",required:!1,type:{name:"Fields"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"CAll"}},totals:{defaultValue:null,description:"",name:"totals",required:!1,type:{name:"Record<string, number>"}},pivots:{defaultValue:null,description:"",name:"pivots",required:!1,type:{name:"Pivots"}},chartTypeMap:{defaultValue:{value:"{}"},description:"",name:"chartTypeMap",required:!1,type:{name:"Record<string, FC<any>>"}},legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"false | CartesianLegend"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../visualizations/src/Visualization/Visualization.tsx#Visualization"]={docgenInfo:Visualization.__docgenInfo,name:"Visualization",path:"../visualizations/src/Visualization/Visualization.tsx#Visualization"})}catch(__react_docgen_typescript_loader_error){}},"../visualizations/src/utils/useTranslation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>useTranslation});var useTranslationBase=__webpack_require__("../i18n/src/useTranslationBase.ts"),merge=__webpack_require__("../../node_modules/lodash/merge.js"),merge_default=__webpack_require__.n(merge),en=__webpack_require__("../visualizations-adapters/src/locales/resources/en.ts"),resources_en=__webpack_require__("../visualizations-table/src/locales/resources/en.ts"),locales_resources_en=__webpack_require__("../visualizations-visx/src/locales/resources/en.ts");const en_en={locale:"en",resources:{en:merge_default()({},{Query:{"No children passed to Query component":"No children passed to Query component","Query component received both dashboard and query props":"Query component received both dashboard and query props"},QueryError:{Error:"Error"},Visualization:{"Measures of type 'date' are currently not supported":"Measures of type 'date' are currently not supported",'No chart found for type "{{type}}"':'No chart found for type "{{type}}"'}},en.en.resources.en,resources_en.en.resources.en,locales_resources_en.en.resources.en)}},useTranslation=(ns,options)=>(0,useTranslationBase.l)(en_en,ns,options)}}]);
//# sourceMappingURL=8645.459501c8.iframe.bundle.js.map