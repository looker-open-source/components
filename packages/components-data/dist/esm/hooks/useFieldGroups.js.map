{"version":3,"file":"useFieldGroups.js","names":["useExplore","groupFields","fields","reduce","acc","dimension","view","push","useFieldGroups","id","_useExplore","explore","rest","_objectWithoutProperties","_excluded","fieldGroups","dimensions","_objectSpread"],"sources":["../../../src/hooks/useFieldGroups.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type {\n  ILookmlModelExplore,\n  ILookmlModelExploreField,\n} from '@looker/sdk';\nimport { useExplore } from './useExplore';\n\ntype FieldGroups = {\n  [group: string]: ILookmlModelExploreField[];\n};\n\n// Group the fields by view name, for easier browsing\nconst groupFields = (fields: ILookmlModelExploreField[] | undefined) => {\n  if (!fields) return {};\n  return fields.reduce((acc: FieldGroups, dimension) => {\n    const { view } = dimension;\n    if (!view) return acc;\n    if (!acc[view]) {\n      acc[view] = [];\n    }\n    acc[view].push(dimension);\n    return acc;\n  }, {});\n};\n\n/**\n * A shared hook for fetching the Field Groups associated with query ID.\n * Used for rendering filter options.\n *\n * @param id query id\n * @returns field groups and api state\n */\n\nexport const useFieldGroups = (id: string) => {\n  const { explore, ...rest } = useExplore(id);\n  const { fields } = explore || ({} as ILookmlModelExplore);\n\n  const fieldGroups = fields?.dimensions ? groupFields(fields?.dimensions) : {};\n\n  return {\n    fieldGroups,\n    ...rest,\n  };\n};\n"],"mappings":";;;;;;;;AASA,SAASA,UAAU,QAAQ,cAAc;AAOzC,MAAMC,WAAW,GAAIC,MAA8C,IAAK;EACtE,IAAI,CAACA,MAAM,EAAE,OAAO,CAAC,CAAC;EACtB,OAAOA,MAAM,CAACC,MAAM,CAAC,CAACC,GAAgB,EAAEC,SAAS,KAAK;IACpD,MAAM;MAAEC;IAAK,CAAC,GAAGD,SAAS;IAC1B,IAAI,CAACC,IAAI,EAAE,OAAOF,GAAG;IACrB,IAAI,CAACA,GAAG,CAACE,IAAI,CAAC,EAAE;MACdF,GAAG,CAACE,IAAI,CAAC,GAAG,EAAE;IAChB;IACAF,GAAG,CAACE,IAAI,CAAC,CAACC,IAAI,CAACF,SAAS,CAAC;IACzB,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAUD,OAAO,MAAMI,cAAc,GAAIC,EAAU,IAAK;EAC5C,MAAAC,WAAA,GAA6BV,UAAU,CAACS,EAAE,CAAC;IAArC;MAAEE;IAAiB,CAAC,GAAAD,WAAA;IAANE,IAAI,GAAAC,wBAAA,CAAAH,WAAA,EAAAI,SAAA;EACxB,MAAM;IAAEZ;EAAO,CAAC,GAAGS,OAAO,IAAK,CAAC,CAAyB;EAEzD,MAAMI,WAAW,GAAGb,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEc,UAAU,GAAGf,WAAW,CAACC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEc,UAAU,CAAC,GAAG,CAAC,CAAC;EAE7E,OAAAC,aAAA;IACEF;EAAW,GACRH,IAAI;AAEX,CAAC","ignoreList":[]}