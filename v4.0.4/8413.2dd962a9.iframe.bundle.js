(globalThis.webpackChunk_looker_storybook=globalThis.webpackChunk_looker_storybook||[]).push([[8413],{"../../node_modules/lodash/_createOver.js":(module,__unused_webpack_exports,__webpack_require__)=>{var apply=__webpack_require__("../../node_modules/lodash/_apply.js"),arrayMap=__webpack_require__("../../node_modules/lodash/_arrayMap.js"),baseIteratee=__webpack_require__("../../node_modules/lodash/_baseIteratee.js"),baseRest=__webpack_require__("../../node_modules/lodash/_baseRest.js"),baseUnary=__webpack_require__("../../node_modules/lodash/_baseUnary.js"),flatRest=__webpack_require__("../../node_modules/lodash/_flatRest.js");module.exports=function createOver(arrayFunc){return flatRest((function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(baseIteratee)),baseRest((function(args){var thisArg=this;return arrayFunc(iteratees,(function(iteratee){return apply(iteratee,thisArg,args)}))}))}))}},"../../node_modules/lodash/compact.js":module=>{module.exports=function compact(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result}},"../../node_modules/lodash/fp/allPass.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("../../node_modules/lodash/fp/overEvery.js")},"../../node_modules/lodash/fp/overEvery.js":(module,__unused_webpack_exports,__webpack_require__)=>{var func=__webpack_require__("../../node_modules/lodash/fp/convert.js")("overEvery",__webpack_require__("../../node_modules/lodash/overEvery.js"));func.placeholder=__webpack_require__("../../node_modules/lodash/fp/placeholder.js"),module.exports=func},"../../node_modules/lodash/overEvery.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayEvery=__webpack_require__("../../node_modules/lodash/_arrayEvery.js"),overEvery=__webpack_require__("../../node_modules/lodash/_createOver.js")(arrayEvery);module.exports=overEvery},"../filter-components/src/FilterErrorMessage/FilterErrorMessage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>FilterErrorMessage});var Space=__webpack_require__("../components/src/Layout/Space/Space/Space.tsx"),Icon=__webpack_require__("../components/src/Icon/Icon.tsx"),Span=__webpack_require__("../components/src/Text/Span/Span.tsx"),esm_extends=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("../../node_modules/react/index.js"),index_esm=__webpack_require__("../../node_modules/@styled-icons/styled-icon/index.esm.js"),Error=react.forwardRef((function(props,ref){return react.createElement(index_esm.StyledIconBase,(0,esm_extends.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},props,{ref}),react.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}))}));Error.displayName="Error";var use_filters_errors=__webpack_require__("../filter-components/src/FilterErrorMessage/use_filters_errors.ts"),constants=__webpack_require__("../filter-components/src/constants/index.ts");const FilterErrorMessage=({filters,userAttributes,useLongMessageForm})=>{const options={userAttributes,useLongMessageForm},filterErrors=(0,use_filters_errors.n)(filters,options);return filterErrors.type===constants.Q?react.createElement(Space.T,{gap:"u2",mt:"xsmall"},react.createElement(Icon.J,{icon:react.createElement(Error,null),color:"critical",size:"xsmall"}),react.createElement(Span.D,{color:"critical",fontSize:"xsmall"},filterErrors.message)):null};try{FilterErrorMessage.displayName="FilterErrorMessage",FilterErrorMessage.__docgenInfo={description:"",displayName:"FilterErrorMessage",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FilterProps[]"}},userAttributes:{defaultValue:null,description:"",name:"userAttributes",required:!1,type:{name:"UserAttributeWithValue[]"}},useLongMessageForm:{defaultValue:null,description:"",name:"useLongMessageForm",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../filter-components/src/FilterErrorMessage/FilterErrorMessage.tsx#FilterErrorMessage"]={docgenInfo:FilterErrorMessage.__docgenInfo,name:"FilterErrorMessage",path:"../filter-components/src/FilterErrorMessage/FilterErrorMessage.tsx#FilterErrorMessage"})}catch(__react_docgen_typescript_loader_error){}},"../filter-components/src/FilterErrorMessage/use_filters_errors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>useFiltersErrors});var lodash_some__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/lodash/some.js"),lodash_some__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_some__WEBPACK_IMPORTED_MODULE_0__),_looker_filter_expressions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../filter-expressions/src/utils/get_expression_type.ts"),_looker_filter_expressions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../filter-expressions/src/utils/user_attribute/get_user_attribute_matching_type_and_expression.ts"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../filter-components/src/utils/useTranslation.ts"),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../filter-components/src/constants/index.ts");const useFiltersErrors=(filters,options={userAttributes:[],useLongMessageForm:!1})=>{const{t}=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.$)("use_filters_errors");let result={};return lodash_some__WEBPACK_IMPORTED_MODULE_0___default()(filters,(filter=>{if(filter.isRequired&&!filter.expression)return result={type:_constants__WEBPACK_IMPORTED_MODULE_2__.Q,message:t("Selection required")},!0;if(hasAtLeastOneMissingUserAttributeValue(filter,options?.userAttributes)){const message=t(options?.useLongMessageForm?"No value is set for your user attribute":"Invalid value");return result={type:_constants__WEBPACK_IMPORTED_MODULE_2__.Q,message},!0}return!1})),result},hasAtLeastOneMissingUserAttributeValue=(filter,userAttributes)=>{const expressionType=filter.expressionType||(0,_looker_filter_expressions__WEBPACK_IMPORTED_MODULE_3__._)({type:filter.type,field:filter.field||void 0}),attribute=(0,_looker_filter_expressions__WEBPACK_IMPORTED_MODULE_4__.x)(expressionType,filter.expression,userAttributes);return!!attribute&&!attribute.value}},"../filter-components/src/Token/FilterToken.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>FilterToken});var esm_extends=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("../../node_modules/react/index.js"),PopoverContent=__webpack_require__("../components/src/Popover/Layout/PopoverContent/PopoverContent.tsx"),Popover=__webpack_require__("../components/src/Popover/Popover.tsx"),get_expression_type=__webpack_require__("../filter-expressions/src/utils/get_expression_type.ts"),get_user_attribute_matching_type_and_expression=__webpack_require__("../filter-expressions/src/utils/user_attribute/get_user_attribute_matching_type_and_expression.ts"),constants=__webpack_require__("../filter-components/src/constants/index.ts"),Filter=__webpack_require__("../filter-components/src/Filter/Filter.tsx"),use_filters_errors=__webpack_require__("../filter-components/src/FilterErrorMessage/use_filters_errors.ts"),FilterErrorMessage=__webpack_require__("../filter-components/src/FilterErrorMessage/FilterErrorMessage.tsx"),Token=__webpack_require__("../filter-components/src/Token/Token.tsx"),summary=__webpack_require__("../filter-expressions/src/utils/summary/summary.ts");const FilterToken=(0,react.forwardRef)((({config,maxWidth,onClick,userAttributes,...props},ref)=>{const expressionType=props.expressionType||(0,get_expression_type._)({type:props.type,field:props.field||void 0}),label=(({expressionType,isRequired,...props})=>(0,summary.S)({...props,required:isRequired,type:expressionType||(0,get_expression_type._)({type:props.type,field:props.field||void 0})}))({...props,type:expressionType,userAttributes}),hasError=(0,use_filters_errors.n)([props],{userAttributes}).type===constants.Q,userAttribute=(0,get_user_attribute_matching_type_and_expression.x)(expressionType,props.expression,userAttributes),isSubdued=""===props.expression||void 0===props.expression||!!userAttribute&&!userAttribute.value,content=react.createElement(Filter.w,(0,esm_extends.Z)({expressionType,config,inline:"inline"===config?.display,userAttributes},props));if("inline"===config?.display)return content;const popoverContent=react.createElement(PopoverContent.y,{maxWidth:"90vw",py:"large"},content,react.createElement(FilterErrorMessage.f,{filters:[props],userAttributes,useLongMessageForm:!0}));return react.createElement(Popover.J,{content:popoverContent,placement:"bottom-start",ref},react.createElement(Token.W,{label,subdued:isSubdued,hasError,maxWidth,onClick}))}));try{FilterToken.displayName="FilterToken",FilterToken.__docgenInfo={description:"",displayName:"FilterToken",props:{expressionType:{defaultValue:null,description:"The type of the expression. Required if field is not provided.\nWill be derived from field and type if absent.",name:"expressionType",required:!1,type:{name:"enum",value:[{value:'"string"'},{value:'"number"'},{value:'"location"'},{value:'"date"'},{value:'"date_time"'},{value:'"tier"'}]}},field:{defaultValue:null,description:"The field associated with the filter.\nRequired if expressionType is not provided.",name:"field",required:!1,type:{name:"ILookmlModelExploreField | null"}},type:{defaultValue:null,description:"The type on the DashboardFilter, e.g. field_filter,\nused to derive expressionType if that is not provided",name:"type",required:!1,type:{name:"string"}},config:{defaultValue:null,description:"The UI config that determines how a control filter will render and behave",name:"config",required:!1,type:{name:"any"}},expression:{defaultValue:null,description:"The current value of the filter.\nSee {@link https://docs.looker.com/reference/filter-expressions Looker Filter Expressions}.",name:"expression",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"Used to generate unique key for multi-condition advanced filters",name:"name",required:!0,type:{name:"string"}},isLinked:{defaultValue:null,description:"Flag for filters where suggestions are link to another filter",name:"isLinked",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"Suggestions are currently loading",name:"isLoading",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:"Filter will render error styling if this is true and expression is empty",name:"isRequired",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"Render filter horizontally (applies to checkboxes and radio buttons)",name:"inline",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Called when the filter expression is changed",name:"onChange",required:!1,type:{name:"((value: FilterChangeProps) => void)"}},onInputChange:{defaultValue:null,description:"Called in the event that user is typing in a suggestable filter, but the results\nare at the front-end limit of 999, so filtering must be done in the API",name:"onInputChange",required:!1,type:{name:"((value: string) => void)"}},loadUserAttributes:{defaultValue:null,description:"Called when user attributes are needed in the filter",name:"loadUserAttributes",required:!1,type:{name:"(() => void)"}},userAttributes:{defaultValue:null,description:"Can be initially empty – loadUserAttributes will be called when they are needed",name:"userAttributes",required:!1,type:{name:"UserAttributeWithValue[]"}},suggestions:{defaultValue:null,description:"Suggestions for the filter – see useSuggestable hook for fetching suggestions via the API",name:"suggestions",required:!1,type:{name:"string[]"}},enumerations:{defaultValue:null,description:"Enumerations for the filter",name:"enumerations",required:!1,type:{name:"Option[] | null"}},dispatchConfigTypeChange:{defaultValue:null,description:"Used to initialize filters in Edit Mode – do not use if filter is not editable",name:"dispatchConfigTypeChange",required:!1,type:{name:"boolean"}},skipFilterConfigCheck:{defaultValue:null,description:"Skip checking if expression can be rendered by filter control",name:"skipFilterConfigCheck",required:!1,type:{name:"boolean"}},allowMultipleValues:{defaultValue:null,description:"Allow multiple values to filter by",name:"allowMultipleValues",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: SyntheticEvent<Element, Event>) => void)"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../filter-components/src/Token/FilterToken.tsx#FilterToken"]={docgenInfo:FilterToken.__docgenInfo,name:"FilterToken",path:"../filter-components/src/Token/FilterToken.tsx#FilterToken"})}catch(__react_docgen_typescript_loader_error){}},"../filter-components/src/Token/Token.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>Token});var _looker_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../components/src/ChipButton/ChipButton.tsx"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const Token=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((({label,subdued=!0,maxWidth,isEmpty,isHoverTarget,hasError,onClick,...props},ref)=>{const showError=!props["aria-expanded"]&&hasError;let TokenComponent;return TokenComponent=isHoverTarget?DropTargetToken:isEmpty?EmptyToken:TokenBase,react__WEBPACK_IMPORTED_MODULE_0__.createElement(TokenComponent,{showError,onClick,maxWidth,ref,role:"button","aria-selected":!subdued},label)}));Token.displayName="Token";const TokenBase=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)(_looker_components__WEBPACK_IMPORTED_MODULE_2__.m).withConfig({displayName:"Token__TokenBase",componentId:"sc-194gay4-0"})([""," max-width:",";"],(({theme,showError})=>showError&&`border: 1px solid ${theme.colors.criticalBorder};`),(({maxWidth})=>maxWidth||"20rem")),DropTargetToken=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)(TokenBase).withConfig({displayName:"Token__DropTargetToken",componentId:"sc-194gay4-1"})(["&:hover{border-color:",";}"],(({theme})=>theme.colors.key)),EmptyToken=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)(TokenBase).withConfig({displayName:"Token__EmptyToken",componentId:"sc-194gay4-2"})(["&[aria-selected='false']{background:",";border:1px dashed ",";color:",";}"],(({theme})=>theme.colors.ui1),(({theme})=>theme.colors.ui4),(({theme})=>theme.colors.text1)),SubduedToken=null;try{Token.displayName="Token",Token.__docgenInfo={description:"Builds the text portion of the FilterToken component\nthat displays the summary (label) description of a filter's value",displayName:"Token",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},subdued:{defaultValue:{value:"true"},description:"",name:"subdued",required:!1,type:{name:"boolean"}},isHoverTarget:{defaultValue:null,description:"",name:"isHoverTarget",required:!1,type:{name:"boolean"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: SyntheticEvent<Element, Event>) => void)"}},hasError:{defaultValue:null,description:"",name:"hasError",required:!1,type:{name:"boolean"}},"aria-expanded":{defaultValue:null,description:"",name:"aria-expanded",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../filter-components/src/Token/Token.tsx#Token"]={docgenInfo:Token.__docgenInfo,name:"Token",path:"../filter-components/src/Token/Token.tsx#Token"})}catch(__react_docgen_typescript_loader_error){}try{SubduedToken.displayName="SubduedToken",SubduedToken.__docgenInfo={description:"",displayName:"SubduedToken",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"GenericOnClick<HTMLSpanElement>"}},iconLabel:{defaultValue:{value:"Delete"},description:"customize the tooltip on the closing icon",name:"iconLabel",required:!1,type:{name:"string"}},onDelete:{defaultValue:null,description:"Displays an x icon and is called when the user clicks that or hits the delete key",name:"onDelete",required:!1,type:{name:"((e?: KeyboardEvent<HTMLSpanElement> | MouseEvent<HTMLSpanElement, MouseEvent>) => void)"}},showError:{defaultValue:null,description:"",name:"showError",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../filter-components/src/Token/Token.tsx#SubduedToken"]={docgenInfo:SubduedToken.__docgenInfo,name:"SubduedToken",path:"../filter-components/src/Token/Token.tsx#SubduedToken"})}catch(__react_docgen_typescript_loader_error){}},"../filter-expressions/src/utils/summary/summary.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>summary});var has_matches_advanced_node=__webpack_require__("../filter-expressions/src/utils/has_matches_advanced_node.ts"),any=__webpack_require__("../../node_modules/lodash/fp/any.js"),any_default=__webpack_require__.n(any),allPass=__webpack_require__("../../node_modules/lodash/fp/allPass.js"),allPass_default=__webpack_require__.n(allPass),flow=__webpack_require__("../../node_modules/lodash/fp/flow.js"),flow_default=__webpack_require__.n(flow),types=__webpack_require__("../filter-expressions/src/types/index.ts"),tree_to_list=__webpack_require__("../filter-expressions/src/utils/tree/tree_to_list.ts");const hasUserAttributeNodeWithoutValue=flow_default()([tree_to_list.i,any_default()(allPass_default()([({type})=>type===types.TYPE_USER_ATTRIBUTE,({attributeValue})=>!attributeValue]))]);var parse_filter_expression=__webpack_require__("../filter-expressions/src/utils/parse_filter_expression.ts"),inorder_traversal=__webpack_require__("../filter-expressions/src/utils/tree/inorder_traversal.ts"),type_to_grammar=__webpack_require__("../filter-expressions/src/utils/type_to_grammar.ts"),i18next=__webpack_require__("../../node_modules/i18next/dist/esm/i18next.js");const t=i18next.Z.t.bind(i18next.Z),summary=props=>{const{type,expression="",userAttributes,field,required}=props;if(required&&!expression)return t("Value required",{ns:"summary"});const{describe,subTypes}=(0,type_to_grammar.U)(type),ast=(0,parse_filter_expression.P)(type,expression,userAttributes);if(hasUserAttributeNodeWithoutValue(ast)){const userAttribute=getUserAttributeMatchingAST(ast,userAttributes);if(userAttribute)return`${userAttribute?.label} (null)`}return(0,has_matches_advanced_node.Q)(subTypes)(ast)?expression:((root,describe,filterType,field)=>{const orItems=[],andItems=[];(0,inorder_traversal.G)(root,(node=>{const item=node;","!==item.type&&(item.is?orItems:andItems).push(describe(item,filterType,field))}));const resultOr=orItems?orItems.join(" or "):"",resultAnd=andItems?andItems.join(" and "):"";let result=resultOr;return result+=resultOr&&resultAnd?", and ":"",result+=resultAnd,result})(ast,describe,type,field)},getUserAttributeMatchingAST=({attributeName},userAttributes)=>userAttributes?.find((ua=>ua.name===attributeName))},"../filter-expressions/src/utils/user_attribute/get_user_attribute_matching_type_and_expression.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>getUserAttributeMatchingTypeAndExpression});var _parse_filter_expression__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../filter-expressions/src/utils/parse_filter_expression.ts");const getUserAttributeMatchingTypeAndExpression=(type,expression="",userAttributes)=>{const ast=(0,_parse_filter_expression__WEBPACK_IMPORTED_MODULE_0__.P)(type,expression,userAttributes);return userAttributes?.find((ua=>ua.name===ast.attributeName))||null}}}]);